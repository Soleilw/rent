(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-24ec829c"],{"081f":function(e,t,a){"use strict";var n=a("591a"),r=a.n(n);r.a},"591a":function(e,t,a){},"74e9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入用户名/地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.renter_name)}},model:{value:e.renter_name,callback:function(t){e.renter_name=t},expression:"renter_name"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择搜索方式"},on:{change:e.changeType},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.renter_name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-select",{attrs:{placeholder:"请选择身份类型"},on:{change:e.typeChange},model:{value:e.typeStatus,callback:function(t){e.typeStatus=t},expression:"typeStatus"}},e._l(e.userTypeList,(function(e){return a("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),1),a("el-select",{attrs:{placeholder:"请选择审核状态"},on:{change:e.stateChange},model:{value:e.stateStatus,callback:function(t){e.stateStatus=t},expression:"stateStatus"}},e._l(e.statusList,(function(e){return a("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:e.searchChange},slot:"append"})],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加身份")])],1)]),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"snapshot.name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"typeString",label:"用户身份"}}),a("el-table-column",{attrs:{prop:"snapshot",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.snapshot?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.snapshot.href}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.snapshot.href},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"snapshot.phone",label:"手机号",width:"120px"}}),a("el-table-column",{attrs:{prop:"snapshot.card_number",label:"身份证",width:"180px"}}),a("el-table-column",{attrs:{prop:"snapshot.number_type",label:"证件类型",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.snapshot.number_type?a("div",[a("span",[e._v("中国居民身份证")])]):e._e(),2==t.row.snapshot.number_type?a("div",[a("span",[e._v("外国人永久居留身份证")])]):e._e(),3==t.row.snapshot.number_type?a("div",[a("span",[e._v("港澳居民居住证")])]):e._e(),4==t.row.snapshot.number_type?a("div",[a("span",[e._v("护照")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"is_authorization",label:"是否已授权",width:"180px"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.is_authorization?a("div",[a("span",[e._v("是")])]):e._e(),2==t.row.is_authorization?a("div",[a("span",[e._v("否")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"state",width:"120px",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("div",[a("span",[e._v("待审核")])]):e._e(),2==t.row.state?a("div",[a("span",{staticStyle:{color:"green"}},[e._v("已通过")])]):e._e(),3==t.row.state?a("div",[a("span",{staticStyle:{color:"red"}},[e._v("未通过")])]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"address.address",label:"房屋地址",width:"250px"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"进出服务到期时间",width:"180px"}}),a("el-table-column",{attrs:{prop:"room",width:"120px",label:"房屋编号"}}),a("el-table-column",{attrs:{prop:"check",width:"120px",label:"身份核验状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.check?a("div",[a("span",[e._v("身份未核验")])]):e._e(),1==t.row.check?a("div",[a("span",{staticStyle:{color:"green"}},[e._v("身份核验通过")])]):e._e(),2==t.row.check?a("div",[a("span",{staticStyle:{color:"red"}},[e._v("身份信息错误")])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作",fixed:"right",width:"150px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleLogs(t.$index,t.row)}}},[e._v("进出记录")])],1),a("el-dropdown-item",[1==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleAudit(t.$index,t.row)}}},[e._v("审核")]):e._e()],1),a("el-dropdown-item",["admin"==e.username?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openServe(t.$index,t.row)}}},[e._v("开通服务 ")]):e._e()],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openedServe(t.$index,t.row)}}},[e._v("已开通的服务")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleFace(t.$index,t.row)}}},[e._v("开通人脸")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleForbidden(t.$index,t.row)}}},[e._v("禁用人脸")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handlePassFace(t.$index,t.row)}}},[e._v("通过人脸")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleVerifyID(t.$index,t.row)}}},[e._v("修改信息")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleChangeFace(t.$index,t.row)}}},[e._v("更换人脸 ")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])],1)],1)],1)]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"进出记录",visible:e.dialogLogs,width:"80%"},on:{"update:visible":function(t){e.dialogLogs=t}}},[a("div",{staticClass:"box"},[a("el-table",{attrs:{data:e.logsData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"number",label:"证件号"}}),a("el-table-column",{attrs:{prop:"time",label:"时间"}}),a("el-table-column",{attrs:{prop:"direction",label:"进出状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.direction?a("span",[e._v("进入")]):2==t.row.direction?a("span",[e._v("外出")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"image",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.image}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.image},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.logsCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.logsSize,layout:"sizes, prev, pager, next, jumper",total:e.logsTotal},on:{"current-change":e.logsCurrentChange,"update:currentPage":function(t){e.logsCurrent=t},"update:current-page":function(t){e.logsCurrent=t},"size-change":e.logsSizeChange}})],1)]),a("el-dialog",{attrs:{visible:e.dialogAudit,title:"审核",width:"20%",align:"center"},on:{"update:visible":function(t){e.dialogAudit=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否通过审核")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toAudit}},[e._v("通过")]),a("el-button",{attrs:{type:"danger"},on:{click:e.unAudit}},[e._v("不通过")])],1)]),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除住户",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该住户")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogForbidden,title:"禁用人脸",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogForbidden=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否禁用人脸")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.forbiddenFace}},[e._v("禁用")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogForbidden=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogFace,title:"开通人脸",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFace=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否开通人脸")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.pushFace}},[e._v("开通")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFace=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{title:"开通服务",visible:e.dialogOpenServe,width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogOpenServe=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[a("el-select",{attrs:{placeholder:"请选择需要开通的服务"},on:{change:e.serveChange},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},e._l(e.serviceLists,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.toConfirm}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogOpenServe=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{title:"已开通服务",visible:e.dialogOpenedServe,width:"80%"},on:{"update:visible":function(t){e.dialogOpenedServe=t}}},[a("div",{staticClass:"box"},[a("el-table",{attrs:{data:e.serviceList,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"订单ID"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"time",label:"商品有效期(天)"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"到期时间"}})],1)],1)]),a("el-dialog",{attrs:{title:"添加用户",visible:e.dialogUser,"close-on-click-modal":!1,width:"80%"},on:{"update:visible":function(t){e.dialogUser=t},close:e.close}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.userForm,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-select",{attrs:{placeholder:"请输入用户名",filterable:"",remote:"","remote-method":e.remoteMethod},on:{change:e.userListChange},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.label+""+e.value,value:e.value}})})),1)],1),a("el-form-item",{attrs:{label:"选择身份"}},[a("el-select",{attrs:{placeholder:"请选择身份"},on:{change:e.roleChange},model:{value:e.userForm.type,callback:function(t){e.$set(e.userForm,"type",t)},expression:"userForm.type"}},e._l(e.rolesList,(function(e){return a("el-option",{key:e.type,attrs:{label:e.name,value:e.type}})})),1)],1),a("el-form-item",{attrs:{label:"选择社区"}},[a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择省份"},on:{change:e.proChange},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.proList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择市级"},on:{change:e.cityChange},model:{value:e.city_id,callback:function(t){e.city_id=t},expression:"city_id"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择区级"},on:{change:e.areasChange},model:{value:e.areas_id,callback:function(t){e.areas_id=t},expression:"areas_id"}},e._l(e.communityList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择社区"},on:{change:e.communityChange},model:{value:e.community_id,callback:function(t){e.community_id=t},expression:"community_id"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择详细地址",filterable:""},on:{change:e.detailAddressChnage},model:{value:e.address,callback:function(t){e.address=t},expression:"address"}},e._l(e.detailAddressList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.address,value:e.id}})})),1),a("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择门牌号"},on:{change:e.roomIdChange},model:{value:e.room_id,callback:function(t){e.room_id=t},expression:"room_id"}},e._l(e.roomList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.door_number,value:e.id}})})),1)],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newUser}},[e._v("提交")])],1)],1)],1)],1)]),a("el-dialog",{attrs:{visible:e.dialogPassFace,title:"通过人脸",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogPassFace=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否通过人脸")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.passFace}},[e._v("通过")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogPassFace=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogVerify,title:"修改信息",width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogVerify=t}}},[a("el-form",{attrs:{"label-width":"80px",model:e.changeFrom}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{model:{value:e.changeFrom.name,callback:function(t){e.$set(e.changeFrom,"name",t)},expression:"changeFrom.name"}})],1),a("el-form-item",{attrs:{label:"性别"}},[a("el-radio-group",{model:{value:e.changeFrom.sex,callback:function(t){e.$set(e.changeFrom,"sex",t)},expression:"changeFrom.sex"}},[a("el-radio",{attrs:{label:1}},[e._v("男")]),a("el-radio",{attrs:{label:2}},[e._v("女")])],1)],1),a("el-form-item",{attrs:{label:"身份证"}},[a("el-input",{model:{value:e.changeFrom.card_number,callback:function(t){e.$set(e.changeFrom,"card_number",t)},expression:"changeFrom.card_number"}})],1),a("el-form-item",{attrs:{label:"手机号"}},[a("el-input",{model:{value:e.changeFrom.phone,callback:function(t){e.$set(e.changeFrom,"phone",t)},expression:"changeFrom.phone"}})],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.verifyID}},[e._v("提交")])],1)],1)],1)],1),a("el-dialog",{attrs:{title:"更换人脸",visible:e.dialogChangeFace,"close-on-click-modal":!1,width:"500px"},on:{"update:visible":function(t){e.dialogChangeFace=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.familyForm}},[a("div",{staticClass:"tips"},[a("p",[a("span",[e._v("提示：")]),e._v("更换后的人脸照片会覆盖掉原有的人脸照片！")])]),a("el-form-item",{attrs:{label:"更换人脸图片"}},[a("el-upload",{ref:"upload",attrs:{action:"https://api.fengniaotuangou.cn/api/upload",limit:1,"before-upload":e.beforeAvatarUpload,"auto-upload":!1,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"on-change":e.handleChange}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择图片")])],1),e.hasNewImage?a("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v(" * 点击文件名可删除所选图片 ")]):e._e(),e.old_href?a("div",{staticClass:"up-img"},[a("span",{staticStyle:{display:"flex","justify-items":"center",color:"#409eff"}},[e._v("原人脸图片")]),a("img",{staticClass:"pic-box",attrs:{src:e.old_href}})]):e._e(),e.familyForm.href?a("div",{staticClass:"up-img"},[a("span",{staticStyle:{display:"flex","justify-items":"center",color:"#67c23a"}},[e._v("新人脸图片")]),a("img",{staticClass:"pic-box",attrs:{src:e.familyForm.href}})]):a("div",{staticClass:"up-img"},[a("img",{staticClass:"pic-box",attrs:{src:e.change_href}})])],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.changeFace}},[e._v("提交")])],1)],1)],1)],1)])],1)},r=[],i=(a("4de4"),a("7db0"),a("4160"),a("c975"),a("d81d"),a("fb6a"),a("b0c0"),a("d3b7"),a("3ca3"),a("159b"),a("ddb0"),a("2b3d"),a("365c")),o=(a("3022"),a("8d81"),{inject:["reload"],data:function(){return{loading:!0,tableData:[],current:1,size:10,total:0,dialogLogs:!1,logsData:[],logsCurrent:1,logsSize:10,logsTotal:0,dialogAudit:!1,renter_id:"",renter_name:"",id:"",dialogDel:!1,dialogOpenServe:!1,dialogOpenedServe:!1,serviceLists:[],serviceList:[],title:"",product_id:"",serveForm:{user_id:"",area_id:"",product_id:"",address_id:"",type:"",face_id:""},user_id:"",addresses_id:"",face_id:"",username:localStorage.getItem("username"),type:2,typeList:[{value:1,label:"按地址搜索"},{value:2,label:"按用户名搜索"}],typeDisabled:!1,dialogForbidden:!1,forbidden_id:"",dialogFace:!1,openFace_id:"",member_type:"",card_number:"",check:"",dialogUser:!1,userForm:{user_id:"",areas_id:"",type:"",address_id:"",address:"",room_id:"",self:1},userForms:{user_id:"",areas_id:"",type:"",address_id:"",address:"",self:1},rolesList:[{name:"户主",type:1},{name:"租客",type:2},{name:"物业",type:4}],proList:[],pro_id:"",cityList:[],city_id:"",communityList:[],community_id:"",areaList:[],areas_id:"",detailAddressList:[],address_id:"",address:"",roomList:[],room_id:"",user:"",userList:[],userData:[],list:[],dialogPassFace:!1,dialogVerify:!1,dialogChangeFace:!1,qiniuaddr:"https://tu.fengniaotuangou.cn",familyForm:{href:"",only_in:"",id:""},old_href:"",change_href:"",hasNewImage:!1,new_file:"",name:"",detailAddress:"",changeFrom:{user_id:"",self:"",name:"",card_number:"",phone:"",sex:""},typeStatus:"",userTypeList:[{name:"户主",type:1},{name:"租客",type:2},{name:"家庭成员",type:3},{name:"物业",type:4}],stateStatus:"",statusList:[{name:"待审核",type:1},{name:"已通过",type:2},{name:"未通过",type:3}],userType:"",userState:""}},mounted:function(){this.getAllRent(this.current,this.size),this.getPro(),this.getUser()},methods:{getAllRent:function(e,t){var a=this;i["a"].households(e,t).then((function(e){a.loading=!1,e.data.forEach((function(e){e.expireTime&&(e.expireTime=e.expireTime.slice(0,10))})),a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},currentChange:function(e){var t=this;if(t.current=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(e,t.size,n,a);break;case 2:var n=t.renter_name;t.fucSearch(e,t.size,n,a)}else t.userState||t.userType?t.fucSearch(e,t.size,"","",t.userType,t.userState):t.getAllRent(e,t.size)},sizeChange:function(e){var t=this;if(t.size=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(1,e,n,a);break;case 2:var n=t.renter_name;t.fucSearch(1,e,n,a)}else t.userState||t.userType?t.fucSearch(1,e,"","",t.userType,t.userState):t.getAllRent(1,e);t.current=1},changeType:function(e){var t=this;t.typeDisabled=!0,t.renter_name="",t.current=1,t.getAllRent(t.current,t.size)},typeChange:function(e){this.userType=e},stateChange:function(e){this.userState=e},fucSearch:function(e,t,a,n,r,o){var s=this;i["a"].searchHousehold(e,t,a,n,r,o).then((function(e){s.loading=!1,e.data.forEach((function(e){e.expireTime&&(e.expireTime=e.expireTime.slice(0,10))})),s.tableData=e.data,s.total=e.total,s.$message.success("搜索成功！")}))},search:function(){var e=this;if(e.loading=!0,e.current=1,e.size=10,e.typeStatus="",e.stateStatus="",1==e.type){var t=e.renter_name;e.fucSearch(e.current,e.size,a,t)}if(2==e.type){var a=e.renter_name;e.fucSearch(e.current,e.size,a,t)}},searchChange:function(){var e=this;e.renter_name="",e.current=1,e.loading=!0,e.fucSearch(e.current,e.size,"","",e.userType,e.userState)},refresh:function(){this.reload()},openFullScreen:function(){var e=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});return e},closeFullScreen:function(e){e.close()},getUser:function(){var e=this;i["a"].userInfo(e.name).then((function(t){e.userData=t,e.list=e.userData.map((function(e){return{label:" ".concat(e.card_number+" "+e.name),value:"".concat(" "+e.user_id)}}))}))},userListChange:function(e){var t=this;t.userForm.user_id=e,t.userForms.user_id=e;var a={};a=this.userList.find((function(e){return e})),t.card_number=a.label.slice(0,17)},remoteMethod:function(e){var t=this;""!==e&&setTimeout((function(){t.userList=t.list.filter((function(t){return t.label.indexOf(e)>-1}))}),200)},roleChange:function(e){var t=this;t.userForm.type=e,t.userForms.type=e},getPro:function(){var e=this;i["a"].areas(1,4e3,0).then((function(t){e.proList=t.data}))},getCity:function(e){var t=this;i["a"].areas(1,4e3,e).then((function(e){t.cityList=e.data}))},getAreas:function(e){var t=this;i["a"].areas(1,4e3,e).then((function(e){t.areaList=e.data}))},getCommunity:function(e){var t=this;i["a"].areas(1,100,e).then((function(e){t.communityList=e.data}))},getDetailAddress:function(e){var t=this;i["a"].addresses(1,4e3,e).then((function(e){t.detailAddressList=e.data}))},getRoomId:function(e){var t=this;i["a"].gainRooms(1,4e3,e).then((function(e){t.roomList=e.data}))},funTitle:function(e,t){var a=this,n={};n=e.find((function(e){return e.id===t})),a.detailAddress+=n.title},proChange:function(e){var t=this;t.funTitle(t.proList,e),t.getCity(e)},cityChange:function(e){var t=this;t.funTitle(t.cityList,e),t.getCommunity(e)},areasChange:function(e){var t=this;t.funTitle(t.communityList,e),t.getAreas(e)},communityChange:function(e){var t=this;t.userForm.areas_id=e,t.userForms.areas_id=e,t.funTitle(t.areaList,e),t.getDetailAddress(e),t.address=""},detailAddressChnage:function(e){var t=this;t.userForm.address_id=e,t.userForms.address_id=e;var a={};a=this.detailAddressList.find((function(t){return t.id===e})),t.detailAddress+=a.address,t.getRoomId(e),t.room_id=""},roomIdChange:function(e){var t=this,a={};a=this.roomList.find((function(t){return t.id===e})),t.detailAddress+=a.door_number,t.userForm.room_id=e},addUser:function(e,t){var a=this;a.dialogUser=!0},close:function(){var e=this;e.pro_id="",e.city_id="",e.community_id="",e.areas_id="",e.address_id="",e.address="",e.room_id="",e.name="",e.userForm={user_id:"",areas_id:"",type:"",address_id:"",address:"",room_id:"",self:1},e.userForms={user_id:"",areas_id:"",type:"",address_id:"",address:"",self:1}},fucUser:function(e){var t=this;i["a"].creation(e).then((function(e){t.dialogUser=!1,t.$message.success("添加成功"),t.getAllRent(t.current,t.size)}))},newUser:function(){var e=this;e.userForm.address=e.detailAddress,e.userForms.address=e.detailAddress,e.userForm.room_id?e.fucUser(e.userForm):e.fucUser(e.userForms)},handlePassFace:function(e,t){var a=this;a.dialogPassFace=!0,a.user_id=t.user_id,a.member_type=t.type,a.card_number=t.snapshot.card_number},passFace:function(){var e=this;e.openFullScreen(),3==e.member_type?i["a"].matchFace(e.user_id,e.card_number).then((function(t){e.closeFullScreen(e.openFullScreen()),e.dialogPassFace=!1,e.$message.success("通过成功")})).catch((function(t){e.closeFullScreen(e.openFullScreen())})):i["a"].matchFace(e.user_id,1).then((function(t){e.closeFullScreen(e.openFullScreen()),e.dialogPassFace=!1,e.$message.success("通过成功")})).catch((function(t){e.closeFullScreen(e.openFullScreen())}))},handleVerifyID:function(e,t){var a=this;a.user_id=t.user_id,a.member_type=t.type,a.card_number=t.snapshot.card_number,a.dialogVerify=!0,a.changeFrom={user_id:t.user_id,self:3==a.member_type?t.snapshot.card_number:1,name:t.snapshot.name,card_number:t.snapshot.card_number,phone:t.snapshot.phone,sex:t.snapshot.sex}},verifyID:function(){var e=this;e.openFullScreen(),i["a"].verifyPerson(e.changeFrom).then((function(t){e.closeFullScreen(e.openFullScreen()),e.dialogVerify=!1,e.$message.success("提交成功"),e.getAllRent(e.current,e.size)})).catch((function(t){e.closeFullScreen(e.openFullScreen())}))},handleFace:function(e,t){var a=this;a.openFace_id=t.id,a.dialogFace=!0},pushFace:function(){var e=this;e.openFullScreen(),i["a"].pushFace(e.openFace_id).then((function(t){e.dialogFace=!1,e.closeFullScreen(e.openFullScreen()),e.$message.success("开通成功")})).catch((function(t){e.closeFullScreen(e.openFullScreen())}))},handleForbidden:function(e,t){var a=this;a.forbidden_id=t.id,a.dialogForbidden=!0},forbiddenFace:function(){var e=this;e.openFullScreen(),i["a"].failFace(e.forbidden_id).then((function(t){e.dialogForbidden=!1,e.closeFullScreen(e.openFullScreen()),e.$message.success("禁用成功")})).catch((function(t){e.closeFullScreen(e.openFullScreen())}))},handleAudit:function(e,t){var a=this;a.renter_id=t.id,a.member_type=t.type,a.card_number=t.snapshot.card_number,a.check=t.check,a.dialogAudit=!0},fucAudit:function(e,t){var a=this;i["a"].audit(a.renter_id,e,t).then((function(e){a.$message.success("提交成功"),a.getAllRent(a.current,a.size),a.dialogAudit=!1}))},toAudit:function(){var e=this;3==e.member_type?e.fucAudit(2,e.card_number):e.fucAudit(2,1)},unAudit:function(){var e=this;3==e.member_type?e.fucAudit(3,e.card_number):e.fucAudit(3,1)},openServe:function(e,t){var a=this;a.dialogOpenServe=!0,a.serveForm={user_id:t.user_id,areas_id:t.address.area_id,product_id:a.product_id,addresses_id:t.address_id,type:t.type,face_id:t.face_id},i["a"].buys().then((function(e){a.serviceLists=e.data}))},serveChange:function(e){var t=this;t.serveForm.product_id=e},openedServe:function(e,t){var a=this;a.dialogOpenedServe=!0,a.user_id=t.user_id,a.member_type=t.type,a.addresses_id=t.address_id,a.face_id=t.face_id,i["a"].userServes(a.user_id,a.face_id).then((function(e){a.serviceList=e}))},toConfirm:function(){var e=this;e.openFullScreen(),i["a"].setProduct(e.serveForm).then((function(t){e.closeFullScreen(e.openFullScreen()),e.$message.success("开通成功！"),e.dialogOpenServe=!1,e.title=""})).catch((function(t){e.closeFullScreen(e.openFullScreen())}))},handleLogs:function(e,t){var a=this;a.dialogLogs=!0,a.face_id=t.face_id,a.logsCurrent=1,a.getFaceLogs(a.logsCurrent,a.logsSize)},getFaceLogs:function(e,t){var a=this;i["a"].faceLogs(e,t,a.face_id).then((function(e){a.logsData=e.data,a.logsTotal=e.total}))},logsCurrentChange:function(e){var t=this;t.logsCurrent=e,t.getFaceLogs(e,t.logsSize)},logsSizeChange:function(e){var t=this;t.logsSize=e,t.getFaceLogs(1,e),t.logsCurrent=1},handleDel:function(e,t){var a=this;a.id=t.id,a.card_number=t.snapshot.card_number,a.member_type=t.type,a.check=t.check,a.dialogDel=!0},fucDel:function(e){var t=this;i["a"].delHousehold(t.id,e).then((function(e){t.$message.success("删除成功"),t.dialogDel=!1,t.getAllRent(t.current,t.size)}))},toDel:function(){var e=this;3==e.member_type?e.fucDel(e.card_number):e.fucDel(1)},handleChangeFace:function(e,t){var a=this;a.dialogChangeFace=!0,a.id=t.id,a.user_id=t.user_id,a.member_type=t.type,a.card_number=t.snapshot.card_number,a.old_href=t.snapshot.href},fucEditFace:function(e){var t=this;i["a"].editFace(t.user_id,e,t.familyForm.href,t.id).then((function(e){t.$message.success("上传成功"),t.current=1,t.getAllRent(t.current,t.size),t.$refs.upload.clearFiles(),t.familyForm.href="",t.change_href="",t.old_href="",t.familyForm.user_id="",t.dialogChangeFace=!1}))},changeFace:function(){var e=this;""===e.change_href?(e.familyForm.href=e.old_href,3==e.member_type?e.fucEditFace(e.card_number):e.fucEditFace(1)):this.$refs.upload.submit()},handleChange:function(e){var t=this;t.change_href=URL.createObjectURL(e.raw),t.hasNewImage=!0},handleRemove:function(e){var t=this;t.change_href="",t.hasNewImage=!1},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},handleAvatarSuccess:function(e,t){var a=this;t.url="".concat(e.data),a.familyForm.href=t.url,3==a.member_type?a.fucEditFace(a.card_number):a.fucEditFace(1)},handleExceed:function(e,t){var a=this;a.$message.error("上传图片不能超过1张!重新上传"),a.familyForm.href="",a.familyForm.user_id=""},getQiniuToken:function(){var e=this;axios.get("https://api.fengniaotuangou.cn/api/upload/token").then((function(t){e.imgData.token=t.data.uptoken}))}}}),s=o,l=(a("081f"),a("2877")),c=Object(l["a"])(s,n,r,!1,null,"7b538eae",null);t["default"]=c.exports},"8d81":function(e,t,a){var n;(function(r){"use strict";function i(e,t){var a=(65535&e)+(65535&t),n=(e>>16)+(t>>16)+(a>>16);return n<<16|65535&a}function o(e,t){return e<<t|e>>>32-t}function s(e,t,a,n,r,s){return i(o(i(i(t,e),i(n,s)),r),a)}function l(e,t,a,n,r,i,o){return s(t&a|~t&n,e,t,r,i,o)}function c(e,t,a,n,r,i,o){return s(t&n|a&~n,e,t,r,i,o)}function d(e,t,a,n,r,i,o){return s(t^a^n,e,t,r,i,o)}function u(e,t,a,n,r,i,o){return s(a^(t|~n),e,t,r,i,o)}function p(e,t){var a,n,r,o,s;e[t>>5]|=128<<t%32,e[14+(t+64>>>9<<4)]=t;var p=1732584193,m=-271733879,f=-1732584194,h=271733878;for(a=0;a<e.length;a+=16)n=p,r=m,o=f,s=h,p=l(p,m,f,h,e[a],7,-680876936),h=l(h,p,m,f,e[a+1],12,-389564586),f=l(f,h,p,m,e[a+2],17,606105819),m=l(m,f,h,p,e[a+3],22,-1044525330),p=l(p,m,f,h,e[a+4],7,-176418897),h=l(h,p,m,f,e[a+5],12,1200080426),f=l(f,h,p,m,e[a+6],17,-1473231341),m=l(m,f,h,p,e[a+7],22,-45705983),p=l(p,m,f,h,e[a+8],7,1770035416),h=l(h,p,m,f,e[a+9],12,-1958414417),f=l(f,h,p,m,e[a+10],17,-42063),m=l(m,f,h,p,e[a+11],22,-1990404162),p=l(p,m,f,h,e[a+12],7,1804603682),h=l(h,p,m,f,e[a+13],12,-40341101),f=l(f,h,p,m,e[a+14],17,-1502002290),m=l(m,f,h,p,e[a+15],22,1236535329),p=c(p,m,f,h,e[a+1],5,-165796510),h=c(h,p,m,f,e[a+6],9,-1069501632),f=c(f,h,p,m,e[a+11],14,643717713),m=c(m,f,h,p,e[a],20,-373897302),p=c(p,m,f,h,e[a+5],5,-701558691),h=c(h,p,m,f,e[a+10],9,38016083),f=c(f,h,p,m,e[a+15],14,-660478335),m=c(m,f,h,p,e[a+4],20,-405537848),p=c(p,m,f,h,e[a+9],5,568446438),h=c(h,p,m,f,e[a+14],9,-1019803690),f=c(f,h,p,m,e[a+3],14,-187363961),m=c(m,f,h,p,e[a+8],20,1163531501),p=c(p,m,f,h,e[a+13],5,-1444681467),h=c(h,p,m,f,e[a+2],9,-51403784),f=c(f,h,p,m,e[a+7],14,1735328473),m=c(m,f,h,p,e[a+12],20,-1926607734),p=d(p,m,f,h,e[a+5],4,-378558),h=d(h,p,m,f,e[a+8],11,-2022574463),f=d(f,h,p,m,e[a+11],16,1839030562),m=d(m,f,h,p,e[a+14],23,-35309556),p=d(p,m,f,h,e[a+1],4,-1530992060),h=d(h,p,m,f,e[a+4],11,1272893353),f=d(f,h,p,m,e[a+7],16,-155497632),m=d(m,f,h,p,e[a+10],23,-1094730640),p=d(p,m,f,h,e[a+13],4,681279174),h=d(h,p,m,f,e[a],11,-358537222),f=d(f,h,p,m,e[a+3],16,-722521979),m=d(m,f,h,p,e[a+6],23,76029189),p=d(p,m,f,h,e[a+9],4,-640364487),h=d(h,p,m,f,e[a+12],11,-421815835),f=d(f,h,p,m,e[a+15],16,530742520),m=d(m,f,h,p,e[a+2],23,-995338651),p=u(p,m,f,h,e[a],6,-198630844),h=u(h,p,m,f,e[a+7],10,1126891415),f=u(f,h,p,m,e[a+14],15,-1416354905),m=u(m,f,h,p,e[a+5],21,-57434055),p=u(p,m,f,h,e[a+12],6,1700485571),h=u(h,p,m,f,e[a+3],10,-1894986606),f=u(f,h,p,m,e[a+10],15,-1051523),m=u(m,f,h,p,e[a+1],21,-2054922799),p=u(p,m,f,h,e[a+8],6,1873313359),h=u(h,p,m,f,e[a+15],10,-30611744),f=u(f,h,p,m,e[a+6],15,-1560198380),m=u(m,f,h,p,e[a+13],21,1309151649),p=u(p,m,f,h,e[a+4],6,-145523070),h=u(h,p,m,f,e[a+11],10,-1120210379),f=u(f,h,p,m,e[a+2],15,718787259),m=u(m,f,h,p,e[a+9],21,-343485551),p=i(p,n),m=i(m,r),f=i(f,o),h=i(h,s);return[p,m,f,h]}function m(e){var t,a="",n=32*e.length;for(t=0;t<n;t+=8)a+=String.fromCharCode(e[t>>5]>>>t%32&255);return a}function f(e){var t,a=[];for(a[(e.length>>2)-1]=void 0,t=0;t<a.length;t+=1)a[t]=0;var n=8*e.length;for(t=0;t<n;t+=8)a[t>>5]|=(255&e.charCodeAt(t/8))<<t%32;return a}function h(e){return m(p(f(e),8*e.length))}function g(e,t){var a,n,r=f(e),i=[],o=[];for(i[15]=o[15]=void 0,r.length>16&&(r=p(r,8*e.length)),a=0;a<16;a+=1)i[a]=909522486^r[a],o[a]=1549556828^r[a];return n=p(i.concat(f(t)),512+8*t.length),m(p(o.concat(n),640))}function v(e){var t,a,n="0123456789abcdef",r="";for(a=0;a<e.length;a+=1)t=e.charCodeAt(a),r+=n.charAt(t>>>4&15)+n.charAt(15&t);return r}function _(e){return unescape(encodeURIComponent(e))}function b(e){return h(_(e))}function y(e){return v(b(e))}function F(e,t){return g(_(e),_(t))}function x(e,t){return v(F(e,t))}function S(e,t,a){return t?a?F(t,e):x(t,e):a?b(e):y(e)}n=function(){return S}.call(t,a,t,e),void 0===n||(e.exports=n)})()},c975:function(e,t,a){"use strict";var n=a("23e7"),r=a("4d64").indexOf,i=a("a640"),o=a("ae40"),s=[].indexOf,l=!!s&&1/[1].indexOf(1,-0)<0,c=i("indexOf"),d=o("indexOf",{ACCESSORS:!0,1:0});n({target:"Array",proto:!0,forced:l||!c||!d},{indexOf:function(e){return l?s.apply(this,arguments)||0:r(this,e,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-24ec829c.3ed411db.js.map