(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-d130388c"],{"55b2":function(e,t,a){},"7e3a":function(e,t,a){"use strict";var n=a("55b2"),i=a.n(n);i.a},d42e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入用户名/地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.renter_name)}},model:{value:e.renter_name,callback:function(t){e.renter_name=t},expression:"renter_name"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择搜索方式"},on:{change:e.changeType},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.renter_name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加白名单")])],1)]),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"address_id",label:"地址ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"250px"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"type",label:"身份类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("户主")]):2==t.row.type?a("span",[e._v("租客")]):3==t.row.type?a("span",[e._v("家庭成员")]):4==t.row.type?a("span",[e._v("物业")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("启用返现功能")]):2==t.row.state?a("span",[e._v("禁用返现功能")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRec(t.$index,t.row)}}},[e._v("返现记录")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRefund(t.$index,t.row)}}},[e._v("手动返现")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleUsing(t.$index,t.row)}}},[e._v("启用返现功能")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleBan(t.$index,t.row)}}},[e._v("禁用返现功能")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])],1)],1)],1)]}}])})],1),a("el-dialog",{attrs:{title:"添加白名单",visible:e.dialogList,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.dialogList=t},close:e.closeList}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.listForm}},[e._l(e.listForm.service,(function(t,n){return a("div",{key:n},[e.isAdd?a("el-form-item",[a("span",[e._v("选择社区：")]),a("el-select",{attrs:{placeholder:"请选择社区"},on:{change:e.changeAreaType},model:{value:t.area_id,callback:function(a){e.$set(t,"area_id",a)},expression:"item.area_id"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"选择地址"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择地址",disabled:e.isDisabled},on:{change:e.selectSize},model:{value:t.address_id,callback:function(a){e.$set(t,"address_id",a)},expression:"item.address_id"}},e._l(e.addressList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.address,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"选择身份"}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择身份类型"},on:{change:e.selectType},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},e._l(e.tyList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.type}})})),1)],1),a("el-form-item",{attrs:{label:"选择用户"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择用户",disabled:e.isDisabled},model:{value:t.user_id,callback:function(a){e.$set(t,"user_id",a)},expression:"item.user_id"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.snapshot.name,value:e.user_id}})})),1)],1),a("el-form-item",{attrs:{label:"输入金额"}},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select ipt",attrs:{placeholder:"请输入金额"},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"item.money"}})],1)]),a("el-form-item",{attrs:{label:"返现状态"}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择状态"},model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},e._l(e.stateList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.value}})})),1)],1)],1)})),e.isAdd?a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addopenList}},[e._v("添加")]),a("el-button",{attrs:{type:"primary"},on:{click:e.delopenList}},[e._v("删除")])],1):e._e(),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newList}},[e._v("提交")])],1)],1)],2)],1)]),a("el-dialog",{attrs:{title:"返现记录",visible:e.dialogRec,width:"80%"},on:{"update:visible":function(t){e.dialogRec=t}}},[a("el-table",{attrs:{data:e.recordDate,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"记录ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("待返现")]):2==t.row.state?a("span",[e._v("返现成功")]):3==t.row.state?a("span",[e._v("返现失败")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.recordCurrent,"page-size":e.recordSize,layout:"sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"current-change":e.recordCurrentChange,"update:currentPage":function(t){e.recordCurrent=t},"update:current-page":function(t){e.recordCurrent=t},"size-change":e.recordSizeChange}})],1)],1),a("el-dialog",{attrs:{visible:e.dialogRefund,title:"返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRefund=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户进行返现 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toRefund}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogRefund=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除记录",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该记录")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogBan,title:"禁用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogBan=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户禁用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toBan}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogBan=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogUsing,title:"启用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogUsing=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户启用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toUsing}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogUsing=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},i=[],l=a("365c"),r=(a("4238"),{inject:["reload"],data:function(){return{loading:!0,tableData:[],recordDate:[],current:1,size:10,total:0,recordCurrent:1,recordSize:10,recordTotal:0,renter_name:"",type:2,typeList:[{value:1,label:"按地址搜索"},{value:2,label:"按用户名搜索"}],dialogList:!1,dialogRec:!1,dialogRefund:!1,dialogDel:!1,dialogBan:!1,dialogUsing:!1,listForm:{id:"",service:[]},addressList:[],userList:[],tyList:[{name:"户主",type:1},{name:"租客",type:2}],monList:[],stateList:[{name:"启用返现",value:1},{name:"禁用返现",value:2}],name:"",areaList:[],address_id:"",typeDisabled:!0,id:"",user_id:"",isAdd:!0,isDisabled:!1}},mounted:function(){this.getList()},methods:{getList:function(){var e=this;l["a"].withdraws(e.current,e.size).then((function(t){console.log(t),e.loading=!1,e.tableData=t.data})).catch((function(t){e.loading=!1}))},currentChange:function(e){var t=this;if(t.current=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;l["a"].withdraws(e,t.size,n,a).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}));break;case 2:var n=t.renter_name;l["a"].withdraws(e,t.size,n,a).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))}else l["a"].withdraws(e,t.size).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))},sizeChange:function(e){var t=this;if(t.size=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;l["a"].withdraws(t.current,e,n,a).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}));break;case 2:var n=t.renter_name;l["a"].withdraws(t.current,e,n,a).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))}else l["a"].withdraws(t.current,e).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))},changeType:function(e){var t=this;t.typeDisabled=!0,t.renter_name="",t.current=1,t.getList()},search:function(){var e=this;if(e.current=1,e.size=10,1==e.type){var t=e.renter_name;l["a"].withdraws(e.current,e.size,a,t).then((function(t){e.tableData=t.data,e.total=t.total,e.$message.success("搜索成功！")}))}if(2==e.type){var a=e.renter_name;l["a"].withdraws(e.current,e.size,a,t).then((function(t){e.tableData=t.data,e.total=t.total,e.$message.success("搜索成功！")}))}},addUser:function(){var e=this;e.dialogList=!0,e.listForm={id:"",service:[]},e.addopenList(),e.isAdd=!0,e.isDisabled=!1,l["a"].areas(1,100,3).then((function(t){e.areaList=t.data}))},changeAreaType:function(e){var t=this;t.area_id=e,l["a"].addresses(1,100,t.area_id).then((function(e){t.addressList=e.data}))},selectSize:function(e){var t=this;t.address_id=e},selectType:function(e){var t=this;l["a"].rent(1,100,t.address_id,e).then((function(e){console.log(e),t.userList=e.data}))},addopenList:function(){var e=this;e.listForm.service.push({})},delopenList:function(){var e=this;e.listForm.service.pop({})},newList:function(){var e=this;e.dialogList=!1,console.log(e.listForm),e.isAdd?l["a"].createRaw(e.listForm).then((function(t){e.$message.success("添加成功！"),e.getList(),e.listForm={id:"",service:[]}})):l["a"].createRaw(e.listForm).then((function(t){e.$message.success("提交成功！"),e.getList()}))},closeList:function(){var e=this;e.isAdd,e.delopenList(),e.listForm.service=[]},handleRec:function(e,t){var a=this;a.dialogRec=!0,a.user_id=t.user_id,a.recordCurrent=1,l["a"].withdrawsRec(a.recordCurrent,a.recordSize,a.user_id).then((function(e){a.$message.success("获取数据成功！"),a.recordDate=e.data,a.recordTotal=e.total}))},recordCurrentChange:function(e){var t=this;t.recordCurrent=e,l["a"].withdrawsRec(e,t.recordSize,t.user_id).then((function(e){console.log(e),t.recordDate=e.data,t.recordTotal=e.total}))},recordSizeChange:function(e){var t=this;t.recordSize=e,l["a"].withdrawsRec(t.recordCurrent,e,t.user_id).then((function(e){console.log(e),t.recordDate=e.data,t.recordTotal=e.total}))},handleRefund:function(e,t){var a=this;a.id=t.id,1==t.state?a.dialogRefund=!0:a.$message.warning("该用户已经被禁用返现功能, 请先开启功能! ")},toRefund:function(){var e=this;l["a"].withdraw(e.id).then((function(t){e.$message.success("返现成功！"),e.dialogRefund=!1}))},handleEdit:function(e,t){var a=this;a.dialogList=!0,a.listForm={id:t.id,service:[{address_id:t.address_id,money:t.money,state:t.state,type:t.type,user_id:t.user_id}]},a.isAdd=!1,a.isDisabled=!0},handleDel:function(e,t){var a=this;a.dialogDel=!0,a.id=t.id},toDel:function(){var e=this;l["a"].delWhite(e.id).then((function(t){e.$message.success("删除成功！"),e.dialogDel=!1,e.getList()}))},handleUsing:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:1}]},2==t.state?a.dialogUsing=!0:a.$message.warning("该用户已经启用返现功能! ")},toUsing:function(){var e=this;l["a"].createRaw(e.listForm).then((function(t){e.$message.success("启用成功！"),e.dialogUsing=!1,e.getList(),e.listForm.service=[]}))},handleBan:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:2}]},1==t.state?a.dialogBan=!0:a.$message.warning("该用户已经禁用返现功能! ")},toBan:function(){var e=this;l["a"].createRaw(e.listForm).then((function(t){e.$message.success("禁用成功！"),e.dialogBan=!1,e.getList(),e.listForm.service=[]}))},refresh:function(){this.reload()}}}),o=r,s=(a("7e3a"),a("2877")),c=Object(s["a"])(o,n,i,!1,null,"622f98be",null);t["default"]=c.exports}}]);
//# sourceMappingURL=chunk-d130388c.9f0cd086.js.map