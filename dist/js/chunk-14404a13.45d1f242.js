(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-14404a13"],{"07c3":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:t.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:t.refresh},slot:"append"})],1),t.isAdmin?a("div",{staticClass:"btn"},[a("span",[t._v("社区：")]),a("el-select",{attrs:{placeholder:"请选择社区"},on:{change:t.changeAreaType},model:{value:t.area,callback:function(e){t.area=e},expression:"area"}},t._l(t.areaList,(function(t){return a("el-option",{key:t.index,attrs:{label:t.title,value:t.id}})})),1)],1):t._e(),a("div",{staticClass:"btn"},[a("span",[t._v("出租屋：")]),a("el-select",{attrs:{placeholder:"请选择/输入出租屋",filterable:""},on:{change:t.letType},model:{value:t.lets,callback:function(e){t.lets=e},expression:"lets"}},t._l(t.letList,(function(t){return a("el-option",{key:t.index,attrs:{label:t.address,value:t.id}})})),1)],1)]),a("div",{staticClass:"table_box"},[a("el-table",{attrs:{data:t.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),""==t.lets?a("el-table-column",{attrs:{prop:"name",label:"房屋地址"}}):a("el-table-column",{attrs:{prop:"name",label:"单元编号"}}),a("el-table-column",{attrs:{prop:"count",label:"人口总数"}}),a("el-table-column",{attrs:{prop:"man",label:"男性人数"}}),a("el-table-column",{attrs:{prop:"woman",label:"女性人数"}}),""==t.lets?a("el-table-column",{attrs:{prop:"wait_state",label:"待审核人数"}}):t._e(),""==t.lets?a("el-table-column",{attrs:{prop:"already_state",label:"审核通过人数"}}):t._e(),""==t.lets?a("el-table-column",{attrs:{prop:"no_state",label:"审核未通过人数"}}):t._e(),""==t.lets?a("el-table-column",{attrs:{label:"操作",width:"250px"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return t.openedPie(e.$index,e.row)}}},[t._v("查看男女比例")])]}}],null,!1,2976893758)}):t._e()],1)],1),""==t.area&&""==t.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.current,"page-sizes":[10,20,30,40,50],"page-size":t.size,layout:"sizes, prev, pager, next, jumper",total:t.total},on:{"current-change":t.currentChange,"update:currentPage":function(e){t.current=e},"update:current-page":function(e){t.current=e},"size-change":t.sizeChange}})],1):t._e(),""!=t.area&&""==t.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.areaCurrent,"page-sizes":[10,20,30,40,50],"page-size":t.areaSize,layout:"sizes, prev, pager, next, jumper",total:t.areaTotal},on:{"current-change":t.areaCurrentChange,"update:currentPage":function(e){t.areaCurrent=e},"update:current-page":function(e){t.areaCurrent=e},"size-change":t.areaSizeChange}})],1):t._e(),""!=t.area&&""!=t.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.letsCurrent,"page-sizes":[10,20,30,40,50],"page-size":t.letsSize,layout:"sizes, prev, pager, next, jumper",total:t.letsTotal},on:{"current-change":t.letsCurrentchange,"update:currentPage":function(e){t.letsCurrent=e},"update:current-page":function(e){t.letsCurrent=e},"size-change":t.letsSizeChange}})],1):t._e(),"admin"!=t.username&&""!=t.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":t.letsCurrent,"page-sizes":[10,20,30,40,50],"page-size":t.letsSize,layout:"sizes, prev, pager, next, jumper",total:t.letsTotal},on:{"current-change":t.letsCurrentchange,"update:currentPage":function(e){t.letsCurrent=e},"update:current-page":function(e){t.letsCurrent=e},"size-change":t.letsSizeChange}})],1):t._e(),"admin"==t.username?a("div",{staticClass:"box"},[a("div",{attrs:{id:"bar-chart"}})]):t._e(),a("el-dialog",{attrs:{title:"男女比例图",visible:t.dialogLogs,width:"50%"},on:{"update:visible":function(e){t.dialogLogs=e}}},[a("div",{ref:"chart",attrs:{id:"pie-chart-user"}})])],1)},i=[],s=(a("4160"),a("b0c0"),a("159b"),a("365c"));a("3022");a("313e");var r={inject:["reload"],data:function(){return{loading:!0,tableData:[],current:1,size:10,total:0,areaCurrent:1,areaSize:10,areaTotal:0,letsCurrent:1,letsSize:10,letsTotal:0,username:localStorage.getItem("username"),isAdmin:!0,area:"",areaList:[],lets:"",letList:[],area_id:"",address_id:"",dialogLogs:!1,bar:{title:{text:"社区人数统计",left:"center"},tooltip:{},xAxis:{data:[]},yAxis:{},dataZoom:[{type:"inside"}],series:[]},pie:{title:{text:"租客男女比例",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right",data:["男生人数","女生人数"]},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{normal:{formatter:"{d}%",position:"inside"}},data:[{value:0,name:"男生人数"},{value:0,name:"女生人数"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},nameList:[],countList:[],existCount:[],num:null}},mounted:function(){this.getSstatistics(),this.getArea(),"admin"!==this.username?(this.isAdmin=!1,this.getLet()):this.getTotal()},methods:{refresh:function(){this.reload()},getSstatistics:function(){var t=this;t.lets="",t.area="","admin"==t.username&&(t.letList=[]),s["a"].statistics(t.current,t.size).then((function(e){t.loading=!1,t.tableData=e.data,t.total=e.total,t.current=1})).catch((function(e){t.loading=!1,console.log(e)}))},currentChange:function(t){var e=this;e.current=t,e.loading=!0,s["a"].statistics(t,e.size).then((function(t){e.loading=!1,e.tableData=t.data,e.total=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},sizeChange:function(t){var e=this;e.size=t,e.loading=!0,s["a"].statistics(e.current,t).then((function(t){e.loading=!1,e.tableData=t.data,e.total=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},getArea:function(){var t=this;s["a"].areas(1,100,3).then((function(e){t.areaList=e.data}))},getLet:function(){var t=this;s["a"].addresses(1,100,t.area_id).then((function(e){t.letList=e.data}))},changeAreaType:function(t){var e=this;e.area_id=t,e.lets="",e.current=1,e.areaCurrent=1,e.loading=!0,s["a"].statistics(e.areaCurrent,e.areaSize,e.area_id).then((function(t){e.loading=!1,e.tableData=t.data,e.areaTotal=t.total})).catch((function(t){e.loading=!1,console.log(t)})),e.getLet()},areaCurrentChange:function(t){var e=this;e.areaCurrent=t,e.loading=!0,s["a"].statistics(t,e.areaSize,e.area_id).then((function(t){e.loading=!1,e.tableData=t.data,e.areaTotal=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},areaSizeChange:function(t){var e=this;e.areaSize=t,e.loading=!0,s["a"].statistics(e.areaCurrent,t,e.area_id).then((function(t){e.loading=!1,e.tableData=t.data,e.areaTotal=t.total,e.areaCurrent=1})).catch((function(t){e.loading=!1,console.log(t)}))},letType:function(t){var e=this;console.log(t),e.address_id=t,e.loading=!0,e.letsCurrent=1,s["a"].statistics(e.letsCurrent,e.letsSize,e.area_id,e.address_id).then((function(t){e.loading=!1,e.tableData=t.data,e.letsTotal=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},letsCurrentchange:function(t){var e=this;e.letsCurrent=t,e.loading=!0,s["a"].statistics(t,e.letsSize,e.area_id,e.address_id).then((function(t){e.loading=!1,e.tableData=t.data,e.letsTotal=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},letsSizeChange:function(t){var e=this;e.letsSize=t,e.loading=!0,s["a"].statistics(e.letsCurrent,t,e.area_id,e.address_id).then((function(t){e.loading=!1,e.tableData=t.data,e.letsTotal=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},getTotal:function(){var t=this,e=document.getElementById("bar-chart"),n=a("313e").init(e);n.setOption(t.bar),t.nameList=[],t.countList=[],s["a"].statistics(1,1e4).then((function(e){e.data.forEach((function(e){t.nameList.push(e.name),t.countList.push(e.count)}));var a=6;n.on("click",(function(e){console.log(t.nameList[Math.max(e.dataIndex-a/2,0)]),n.dispatchAction({type:"dataZoom",startValue:t.nameList[Math.max(e.dataIndex-a/2,0)],endValue:t.nameList[Math.min(e.dataIndex+a/2,t.nameList.length-1)]})})),n.setOption(t.bar={xAxis:{data:t.nameList},dataZoom:[{type:"inside"}],series:[{name:"社区总人数",type:"bar",label:{show:!0,position:"inside"},data:t.countList}]})}))},openedPie:function(t,e){var a=this;a.dialogLogs=!0,a.num=t,a.getPie()},getPie:function(){var t=this;t.$nextTick((function(){var e=this.$refs.chart,n=a("313e").init(e);n.setOption(t.pie),""==t.area&&""==t.lets&&"admin"==t.username?s["a"].statistics(t.current,t.size).then((function(e){n.setOption(t.pie={title:{text:e.data[t.num].name,left:"center"},series:[{name:e.data[t.num].name,data:[{value:e.data[t.num].man,name:"男生人数"},{value:e.data[t.num].woman,name:"女生人数"}]}]})})):""!=t.area&&""==t.lets&&"admin"==t.username?s["a"].statistics(t.areaCurrent,t.areaSize,t.area_id).then((function(e){n.setOption(t.pie={title:{text:e.data[t.num].name,left:"center"},series:[{name:e.data[t.num].name,data:[{value:e.data[t.num].man,name:"男生人数"},{value:e.data[t.num].woman,name:"女生人数"}]}]})})):"admin"!=t.username&&s["a"].statistics(t.current,t.size).then((function(e){n.setOption(t.pie={title:{text:e.data[t.num].name,left:"center"},series:[{name:e.data[t.num].name,data:[{value:e.data[t.num].man,name:"男生人数"},{value:e.data[t.num].woman,name:"女生人数"}]}]})}))}))}}},l=r,o=(a("41ed"),a("2877")),c=Object(o["a"])(l,n,i,!1,null,"5fc6dc9c",null);e["default"]=c.exports},"41ed":function(t,e,a){"use strict";var n=a("7257"),i=a.n(n);i.a},7257:function(t,e,a){}}]);
//# sourceMappingURL=chunk-14404a13.45d1f242.js.map