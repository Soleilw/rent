(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-18d493ef"],{"005c":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"box"},[n("div",{staticClass:"handle-box"},[n("div",{staticClass:"btn"},[e.isAdmin?n("el-button",{attrs:{type:"primary"},on:{click:e.getTotal}},[e._v("全部")]):e._e()],1),n("div",{staticClass:"btn"},[e.isAdmin?e._e():n("el-button",{attrs:{type:"primary"},on:{click:e.getSclTotal}},[e._v("全部")])],1),e.isAdmin?n("div",{staticClass:"btn"},[n("span",[e._v("学校：")]),n("el-select",{attrs:{placeholder:"请选择学校"},on:{change:e.changeSchoolType},model:{value:e.school,callback:function(t){e.school=t},expression:"school"}},e._l(e.schoolList,(function(e){return n("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),e.isAdmin?n("div",{staticClass:"btn"},[n("span",[e._v("年级：")]),n("el-select",{attrs:{placeholder:"请选择年级"},on:{change:e.changeGradeType},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}},e._l(e.gradeList,(function(e){return n("el-option",{key:e.index,attrs:{label:e.name,value:e.id}})})),1)],1):e._e(),e.isAdmin?e._e():n("div",{staticClass:"btn"},[n("span",[e._v("年级：")]),n("el-select",{attrs:{placeholder:"请选择年级"},on:{change:e.changeSclGradeType},model:{value:e.grade,callback:function(t){e.grade=t},expression:"grade"}},e._l(e.gradeList,(function(e){return n("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1)]),n("div",{attrs:{id:"bar-chart"}}),e._m(0)])},i=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"pie-box"},[n("div",{attrs:{id:"pie-chart-user"}}),n("div",{attrs:{id:"pie-chart-student"}})])}],s=(n("4160"),n("b0c0"),n("159b"),n("365c"));n("313e");var o={name:"studentsTatal",data:function(){return{isAdmin:!0,school:"",grade:"",schoolList:[],gradeList:[],nameList:[],countList:[],existCount:[],school_id:"",grade_id:"",bar:{title:{text:"学生统计",left:"center"},tooltip:{},legend:{orient:"vertical",data:["总学生数","已注册人数"],left:"right"},xAxis:{data:[]},yAxis:{},series:[]},pie:{title:{},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right",data:["男生人数","女生人数"]},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{normal:{formatter:"{d}%",position:"inside"}},data:[{value:0,name:"男生人数"},{value:0,name:"女生人数"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},title:{user:"用户男女比例",student:"学生男女比例"},username:localStorage.getItem("username")}},methods:{changeSchoolType:function(e){var t=this,a=document.getElementById("bar-chart"),i=document.getElementById("pie-chart-user"),o=document.getElementById("pie-chart-student"),r=n("313e").init(a),u=n("313e").init(i),d=n("313e").init(o);r.setOption(t.bar),u.setOption(t.pie),d.setOption(t.pie),t.nameList=[],t.countList=[],t.existCount=[],t.grade="",t.school_id=e,s["a"].statistics(t.school_id).then((function(e){t.gradeList=e.data,e.data.forEach((function(e){t.nameList.push(e.name),t.countList.push(e.count),t.existCount.push(e.exist_count)})),r.setOption(t.bar={xAxis:{data:t.nameList},series:[{name:"总学生数",type:"bar",label:{show:!0,position:"inside"},data:t.countList},{name:"已注册人数",type:"bar",label:{show:!0,position:"inside"},data:t.existCount}]}),s["a"].studentGender(0,1,t.school_id).then((function(e){u.setOption(t.pie={title:{text:t.title.user,left:"center"},series:[{name:t.title.user,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})})),s["a"].studentGender(0,2,t.school_id).then((function(e){d.setOption(t.pie={title:{text:t.title.student,left:"center"},series:[{name:t.title.student,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})}))}))},changeGradeType:function(e){var t=this,a=document.getElementById("bar-chart"),i=document.getElementById("pie-chart-user"),o=document.getElementById("pie-chart-student"),r=n("313e").init(a),u=n("313e").init(i),d=n("313e").init(o);r.setOption(t.bar),u.setOption(t.pie),d.setOption(t.pie),t.grade_id=e,t.nameList=[],t.countList=[],t.existCount=[],s["a"].statistics(t.school_id,t.grade_id).then((function(e){e.data.forEach((function(e){t.nameList.push(e.name),t.countList.push(e.count),t.existCount.push(e.exist_count)})),r.setOption(t.bar={xAxis:{data:t.nameList},series:[{name:"总学生数",type:"bar",label:{show:!0,position:"inside"},data:t.countList},{name:"已注册人数",type:"bar",label:{show:!0,position:"inside"},data:t.existCount}]}),s["a"].studentGender(0,1,t.school_id,t.grade_id).then((function(e){u.setOption(t.pie={title:{text:t.title.user,left:"center"},series:[{name:t.title.user,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})})),s["a"].studentGender(0,2,t.school_id,t.grade_id).then((function(e){d.setOption(t.pie={title:{text:t.title.student,left:"center"},series:[{name:t.title.student,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})}))}))},changeSclGradeType:function(e){var t=this,a=document.getElementById("bar-chart"),i=document.getElementById("pie-chart-user"),o=document.getElementById("pie-chart-student"),r=n("313e").init(a),u=n("313e").init(i),d=n("313e").init(o);r.setOption(t.bar),u.setOption(t.pie),d.setOption(t.pie),t.grade_id=e,t.nameList=[],t.countList=[],t.existCount=[],s["a"].statistics(0,t.grade_id).then((function(e){e.data.forEach((function(e){t.nameList.push(e.name),t.countList.push(e.count),t.existCount.push(e.exist_count)})),r.setOption(t.bar={xAxis:{data:t.nameList},series:[{name:"总学生数",type:"bar",label:{show:!0,position:"inside"},data:t.countList},{name:"已注册人数",type:"bar",label:{show:!0,position:"inside"},data:t.existCount}]}),s["a"].studentGender(0,1,0,t.grade_id).then((function(e){u.setOption(t.pie={title:{text:t.title.user,left:"center"},series:[{name:t.title.user,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})})),s["a"].studentGender(0,2,0,t.grade_id).then((function(e){d.setOption(t.pie={title:{text:t.title.student,left:"center"},series:[{name:t.title.student,data:[{value:e.man_total,name:"男生人数"},{value:e.woman_total,name:"女生人数"}]}]})}))}))},getTotal:function(){var e=this,t=document.getElementById("bar-chart"),a=document.getElementById("pie-chart-user"),i=document.getElementById("pie-chart-student"),o=n("313e").init(t),r=n("313e").init(a),u=n("313e").init(i);o.setOption(e.bar),r.setOption(e.pie),u.setOption(e.pie),e.nameList=[],e.countList=[],e.existCount=[],e.gradeList=[],e.school="",e.grade="",e.isAdmin=!0,s["a"].statistics().then((function(t){t.data.forEach((function(t){e.nameList.push(t.name),e.countList.push(t.count),e.existCount.push(t.exist_count)})),o.setOption(e.bar={xAxis:{data:e.nameList},series:[{name:"总学生数",type:"bar",label:{show:!0,position:"inside"},data:e.countList},{name:"已注册人数",type:"bar",label:{show:!0,position:"inside"},data:e.existCount}]})})),s["a"].studentGender(0,1).then((function(t){r.setOption(e.pie={title:{text:e.title.user,left:"center"},series:[{name:e.title.user,data:[{value:t.man_total,name:"男生人数"},{value:t.woman_total,name:"女生人数"}]}]})})),s["a"].studentGender(0,2).then((function(t){u.setOption(e.pie={title:{text:e.title.student,left:"center"},series:[{name:e.title.student,data:[{value:t.man_total,name:"男生人数"},{value:t.woman_total,name:"女生人数"}]}]})})),s["a"].schools().then((function(t){e.schoolList=t.data}))},getSclTotal:function(){var e=this;e.isAdmin=!1;var t=document.getElementById("bar-chart"),a=document.getElementById("pie-chart-user"),i=document.getElementById("pie-chart-student"),o=n("313e").init(t),r=n("313e").init(a),u=n("313e").init(i);o.setOption(e.bar),r.setOption(e.pie),u.setOption(e.pie),e.nameList=[],e.countList=[],e.existCount=[],e.school="",e.grade="",s["a"].grades().then((function(t){e.gradeList=t.data})),s["a"].statistics().then((function(t){t.data.forEach((function(t){e.nameList.push(t.name),e.countList.push(t.count),e.existCount.push(t.exist_count)})),o.setOption(e.bar={xAxis:{data:e.nameList},series:[{name:"总学生数",type:"bar",label:{show:!0,position:"inside"},data:e.countList},{name:"已注册人数",type:"bar",label:{show:!0,position:"inside"},data:e.existCount}]}),s["a"].studentGender(0,1).then((function(t){r.setOption(e.pie={title:{text:e.title.user,left:"center"},series:[{name:e.title.user,data:[{value:t.man_total,name:"男生人数"},{value:t.woman_total,name:"女生人数"}]}]})})),s["a"].studentGender(0,2).then((function(t){u.setOption(e.pie={title:{text:e.title.student,left:"center"},series:[{name:e.title.student,data:[{value:t.man_total,name:"男生人数"},{value:t.woman_total,name:"女生人数"}]}]})}))}))}},mounted:function(){"admin"==this.username?this.getTotal():this.getSclTotal()}},r=o,u=(n("331b"),n("2877")),d=Object(u["a"])(r,a,i,!1,null,"6f492f56",null);t["default"]=d.exports},"331b":function(e,t,n){"use strict";var a=n("b0ba"),i=n.n(a);i.a},"365c":function(e,t,n){"use strict";var a=n("be3b"),i=n("99b1"),s=n.n(i),o={houser:function(e,t,n){return a["a"].get(s.a.HouseManagers,{page:e,limit:t,address_id:n})},audit:function(e,t){return a["a"].post(s.a.CheckManagers,{id:e,state:t})},addresses:function(e,t,n,i){return a["a"].get(s.a.Addresses,{page:e,limit:t,area_id:n,address:i})},rooms:function(e){return a["a"].post(s.a.Rooms,e)},gainRooms:function(e,t,n){return a["a"].get(s.a.Rooms,{page:e,limit:t,address_id:n})},delBuilding:function(e){return a["a"].del(s.a.DelBuilding,{id:e})},households:function(e,t,n,i,o,r,u,d){return a["a"].get(s.a.Households,{page:e,limit:t,user_id:n,address_id:i,type:o,state:r,room_id:u,name:d})},addressResidents:function(e,t,n,i){return a["a"].get(s.a.AddressResidents,{page:e,limit:t,address_id:n,type:i})},faceLogs:function(e,t,n){return a["a"].get(s.a.FaceLogs,{page:e,limit:t,face_id:n})},searchHousehold:function(e,t,n){return a["a"].get(s.a.Households,{page:e,limit:t,name:n})},delHousehold:function(e){return a["a"].del(s.a.Household,{id:e})},banners:function(e,t){return a["a"].get(s.a.Banners,{page:e,limit:t})},banner:function(e){return a["a"].post(s.a.Banner,e)},message:function(e){return a["a"].post(s.a.Message,e)},messages:function(e,t){return a["a"].get(s.a.Messages,{page:e,limit:t})},messageType:function(e){return a["a"].post(s.a.MessageType,e)},messageTypes:function(e,t){return a["a"].get(s.a.MessageTypes,{page:e,limit:t})},delDocumentType:function(e){return a["a"].del(s.a.DelDocumentType,{id:e})},documents:function(e,t){return a["a"].get(s.a.Documents,{page:e,limit:t})},delDocument:function(e){return a["a"].del(s.a.DelDocument,{id:e})},document:function(e){return a["a"].post(s.a.Document,e)},documentDel:function(e){return a["a"].del(s.a.DocumentDel,{id:e})},delBanner:function(e){return a["a"].del(s.a.DelBanner,{id:e})},role:function(e){return a["a"].post(s.a.Role,e)},getRole:function(e,t){return a["a"].get(s.a.Role,{page:e,limit:t})},delRole:function(e){return a["a"].del(s.a.Role,{id:e})},user:function(e){return a["a"].post(s.a.User,e)},users:function(e,t){return a["a"].get(s.a.Users,{page:e,limit:t})},delUser:function(e){return a["a"].del(s.a.User,{id:e})},areas:function(e,t,n){return a["a"].get(s.a.Areas,{page:e,limit:t,parent_id:n})},buys:function(e,t){return a["a"].get(s.a.Buys,{page:e,limit:t})},buy:function(e){return a["a"].post(s.a.Buy,e)},server:function(e,t,n,i,o){return a["a"].get(s.a.Server,{page:e,limit:t,product_id:n,keyword:i,areas_id:o})},setProduct:function(e){return a["a"].post(s.a.SetProduct,e)},userServes:function(e,t){return a["a"].get(s.a.UserServes,{user_id:e,addresses_id:t})},delServer:function(e){return a["a"].del(s.a.DelServer,{id:e})},dangerFace:function(e,t,n){return a["a"].get(s.a.DangerFace,{page:e,limit:t,address_id:n})},addDangerFace:function(e){return a["a"].post(s.a.DangerFace,e)},address:function(e,t,n){return a["a"].get(s.a.Address,{page:e,limit:t,area_id:n})},dangerLog:function(e,t,n){return a["a"].get(s.a.DangerLog,{page:e,limit:t,danger_id:n})}};t["a"]=o},b0ba:function(e,t,n){}}]);
//# sourceMappingURL=chunk-18d493ef.3ca576d8.js.map