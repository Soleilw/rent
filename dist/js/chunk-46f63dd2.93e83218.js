(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-46f63dd2"],{"365c":function(e,t,a){"use strict";var n=a("be3b"),r=a("99b1"),o=a.n(r),i={houser:function(e,t,a){return n["a"].get(o.a.HouseManagers,{page:e,limit:t,address_id:a})},audit:function(e,t){return n["a"].post(o.a.CheckManagers,{id:e,state:t})},addresses:function(e,t,a,r){return n["a"].get(o.a.Addresses,{page:e,limit:t,area_id:a,address:r})},rooms:function(e){return n["a"].post(o.a.Rooms,e)},gainRooms:function(e,t,a){return n["a"].get(o.a.Rooms,{page:e,limit:t,address_id:a})},delBuilding:function(e){return n["a"].del(o.a.DelBuilding,{id:e})},households:function(e,t,a,r,i,s,l,d){return n["a"].get(o.a.Households,{page:e,limit:t,user_id:a,address_id:r,type:i,state:s,room_id:l,name:d})},addressResidents:function(e,t,a,r){return n["a"].get(o.a.AddressResidents,{page:e,limit:t,address_id:a,type:r})},faceLogs:function(e,t,a){return n["a"].get(o.a.FaceLogs,{page:e,limit:t,face_id:a})},searchHousehold:function(e,t,a){return n["a"].get(o.a.Households,{page:e,limit:t,name:a})},searchAddress:function(e,t,a){return n["a"].get(o.a.Households,{page:e,limit:t,keyword:a})},delHousehold:function(e){return n["a"].del(o.a.Household,{id:e})},banners:function(e,t){return n["a"].get(o.a.Banners,{page:e,limit:t})},banner:function(e){return n["a"].post(o.a.Banner,e)},message:function(e){return n["a"].post(o.a.Message,e)},messages:function(e,t){return n["a"].get(o.a.Messages,{page:e,limit:t})},messageType:function(e){return n["a"].post(o.a.MessageType,e)},messageTypes:function(e,t){return n["a"].get(o.a.MessageTypes,{page:e,limit:t})},delDocumentType:function(e){return n["a"].del(o.a.DelDocumentType,{id:e})},documents:function(e,t){return n["a"].get(o.a.Documents,{page:e,limit:t})},delDocument:function(e){return n["a"].del(o.a.DelDocument,{id:e})},document:function(e){return n["a"].post(o.a.Document,e)},documentDel:function(e){return n["a"].del(o.a.DocumentDel,{id:e})},delBanner:function(e){return n["a"].del(o.a.DelBanner,{id:e})},role:function(e){return n["a"].post(o.a.Role,e)},getRole:function(e,t){return n["a"].get(o.a.Role,{page:e,limit:t})},delRole:function(e){return n["a"].del(o.a.Role,{id:e})},user:function(e){return n["a"].post(o.a.User,e)},users:function(e,t){return n["a"].get(o.a.Users,{page:e,limit:t})},delUser:function(e){return n["a"].del(o.a.User,{id:e})},areas:function(e,t,a){return n["a"].get(o.a.Areas,{page:e,limit:t,parent_id:a})},buys:function(e,t){return n["a"].get(o.a.Buys,{page:e,limit:t})},buy:function(e){return n["a"].post(o.a.Buy,e)},server:function(e,t,a,r,i){return n["a"].get(o.a.Server,{page:e,limit:t,product_id:a,keyword:r,areas_id:i})},setProduct:function(e){return n["a"].post(o.a.SetProduct,e)},userServes:function(e,t){return n["a"].get(o.a.UserServes,{user_id:e,addresses_id:t})},delServer:function(e){return n["a"].del(o.a.DelServer,{id:e})},dangerFace:function(e,t,a){return n["a"].get(o.a.DangerFace,{page:e,limit:t,address_id:a})},addDangerFace:function(e){return n["a"].post(o.a.DangerFace,e)},address:function(e,t,a){return n["a"].get(o.a.Address,{page:e,limit:t,area_id:a})},dangerLog:function(e,t,a){return n["a"].get(o.a.DangerLog,{page:e,limit:t,danger_id:a})},statistics:function(e,t,a,r){return n["a"].get(o.a.Statistics,{page:e,limit:t,area_id:a,address_id:r})}};t["a"]=i},"3cac":function(e,t,a){"use strict";var n=a("d599"),r=a.n(n);r.a},"74e9":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入用户名/地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.renter_name)}},model:{value:e.renter_name,callback:function(t){e.renter_name=t},expression:"renter_name"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择搜索方式"},on:{change:e.changeType},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.renter_name)}},slot:"append"})],1)],1)]),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"snapshot.name",label:"用户名"}}),a("el-table-column",{attrs:{prop:"typeString",label:"用户身份"}}),a("el-table-column",{attrs:{prop:"snapshot",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.snapshot?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.snapshot.href}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.snapshot.href},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])}),a("el-table-column",{attrs:{prop:"snapshot.phone",label:"手机号",width:"150px"}}),a("el-table-column",{attrs:{prop:"snapshot.card_number",label:"身份证",width:"180px"}}),a("el-table-column",{attrs:{prop:"address.address",label:"房屋地址",width:"250px"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"进出服务到期时间",width:"180px"}}),a("el-table-column",{attrs:{prop:"room",width:"120px",label:"房屋编号"}}),a("el-table-column",{attrs:{prop:"state",width:"120px",label:"审核状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("div",[a("span",[e._v("待审核")])]):e._e(),2==t.row.state?a("div",[a("span",{staticStyle:{color:"green"}},[e._v("已通过")])]):e._e(),3==t.row.state?a("div",[a("span",{staticStyle:{color:"red"}},[e._v("未通过")])]):e._e()]}}])}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 操作"),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleLogs(t.$index,t.row)}}},[e._v("进出记录")])],1),a("el-dropdown-item",[1==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleAudit(t.$index,t.row)}}},[e._v("审核")]):e._e()],1),a("el-dropdown-item",[e.isShow?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.openServe(t.$index,t.row)}}},[e._v("开通服务")]):e._e()],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.openedServe(t.$index,t.row)}}},[e._v("已开通的服务")])],1),a("el-dropdown-item",[a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])],1)],1)],1)]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.totalPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange}})],1),a("el-dialog",{attrs:{title:"进出记录",visible:e.dialogLogs},on:{"update:visible":function(t){e.dialogLogs=t}}},[a("div",{staticClass:"box"},[a("el-table",{attrs:{data:e.logsData,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),a("el-table-column",{attrs:{prop:"number",label:"证件号"}}),a("el-table-column",{attrs:{prop:"time",label:"时间"}}),a("el-table-column",{attrs:{prop:"direction",label:"进出状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.direction?a("span",[e._v("进入")]):2==t.row.direction?a("span",[e._v("外出")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"image",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?a("div",[a("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[a("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.image}}),a("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.image},slot:"reference"})])],1):a("div",[a("span",[e._v("--暂无图片--")])])]}}])})],1)],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.currentLogsPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSizeLogs,layout:"sizes, prev, pager, next, jumper",total:e.totalLogsPage},on:{"current-change":e.handleCurrentLogs,"update:currentPage":function(t){e.currentLogsPage=t},"update:current-page":function(t){e.currentLogsPage=t},"size-change":e.handleSizeLogs}})],1)]),a("el-dialog",{attrs:{visible:e.dialogAudit,title:"审核",width:"20%",align:"center"},on:{"update:visible":function(t){e.dialogAudit=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否通过审核")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toAudit}},[e._v("通过")]),a("el-button",{attrs:{type:"danger"},on:{click:e.unAudit}},[e._v("不通过")])],1)]),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除住户",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该住户")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{title:"开通服务",visible:e.dialogOpenServe,width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogOpenServe=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[a("el-select",{attrs:{placeholder:"请选择需要开通的服务"},on:{change:e.serveChange},model:{value:e.title,callback:function(t){e.title=t},expression:"title"}},e._l(e.serviceLists,(function(e){return a("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1),a("div",[a("el-button",{attrs:{type:"primary"},on:{click:e.toConfirm}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogOpenServe=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{title:"进出记录",visible:e.dialogOpenedServe},on:{"update:visible":function(t){e.dialogOpenedServe=t}}},[a("div",{staticClass:"box"},[a("el-table",{attrs:{data:e.serviceList,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"订单ID"}}),a("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),a("el-table-column",{attrs:{prop:"time",label:"商品有效期(天)"}}),a("el-table-column",{attrs:{prop:"expireTime",label:"到期时间"}})],1)],1)])],1)},r=[],o=a("365c"),i={data:function(){return{loading:!0,form:{identity:""},tableData:[],currentPage:1,pageSize:10,totalPage:0,dialogLogs:!1,logsData:[],currentLogsPage:1,pageSizeLogs:10,totalLogsPage:0,dialogAudit:!1,renter_id:"",renter_name:"",id:"",dialogDel:!1,dialogOpenServe:!1,dialogOpenedServe:!1,serviceLists:[],serviceList:[],title:"",product_id:"",serveForm:{user_id:"",area_id:"",product_id:"",address_id:""},user_id:"",addresses_id:"",face_id:"",username:localStorage.getItem("username"),isShow:!1,type:2,typeList:[{value:1,label:"按地址搜索"},{value:2,label:"按用户名搜索"}],typeDisabled:!1}},mounted:function(){this.getAllRent(),"admin"==this.username&&(this.isShow=!0)},methods:{getAllRent:function(){var e=this;o["a"].households(e.currentPage,e.pageSize).then((function(t){e.tableData=t.data,e.totalPage=t.total,e.loading=!1})).catch((function(t){e.loading=!1,console.log(t)}))},changeType:function(e){var t=this;t.typeDisabled=!0,t.renter_name="",t.currentPage=1,t.getAllRent()},search:function(){var e=this;if(1==e.type){var t=e.renter_name;o["a"].searchAddress(e.currentPage,e.pageSize,t).then((function(t){e.tableData=t.data,e.totalPage=t.total,e.$message.success("搜索成功！")}))}if(2==e.type){var a=e.renter_name;o["a"].searchHousehold(e.currentPage,e.pageSize,a).then((function(t){e.tableData=t.data,e.totalPage=t.total,e.$message.success("搜索成功！")}))}},handleAudit:function(e,t){var a=this;a.renter_id=t.id,a.dialogAudit=!0},toAudit:function(){var e=this;o["a"].audit(e.renter_id,2).then((function(t){e.$message.success("提交成功"),e.dialogAudit=!1,e.getAllRent()}))},unAudit:function(){var e=this;o["a"].audit(e.renter_id,3).then((function(t){e.$message.success("提交成功"),e.dialogAudit=!1,e.getAllRent()}))},serveChange:function(e){var t=this;t.serveForm.product_id=e,console.log(t.serveForm.product_id)},openServe:function(e,t){var a=this;console.log("openServe",e),console.log("openServe",t),a.dialogOpenServe=!0,a.serveForm={user_id:t.user_id,areas_id:t.address.area_id,product_id:a.product_id,addresses_id:t.address_id},o["a"].buys().then((function(e){console.log(e),a.serviceLists=e.data}))},openedServe:function(e,t){var a=this;a.dialogOpenedServe=!0,console.log("openedServe",t),a.user_id=t.user_id,a.addresses_id=t.address_id,o["a"].userServes(a.user_id,a.addresses_id).then((function(e){console.log(e),a.serviceList=e}))},toConfirm:function(){var e=this;console.log(e.serveForm),o["a"].setProduct(e.serveForm).then((function(t){console.log("toConfirm",t),e.$message.success("开通成功！"),e.dialogOpenServe=!1,e.title=""}))},handleLogs:function(e,t){var a=this;a.dialogLogs=!0,a.face_id=t.face_id,console.log(t),a.getFaceLogs()},getFaceLogs:function(){var e=this;o["a"].faceLogs(e.currentLogsPage,e.pageSizeLogs,e.face_id).then((function(t){console.log("getFaceLogs",t),e.logsData=t.data,e.totalLogsPage=t.total}))},handleDel:function(e,t){var a=this;a.id=t.id,a.dialogDel=!0},toDel:function(){var e=this;o["a"].delHousehold(e.id).then((function(t){e.$message.success("删除成功"),e.dialogDel=!1,e.getAllRent()}))},handleCurrentChange:function(e){var t=this;if(t.currentPage=e,t.renter_name)switch(t.type){case 1:var a=t.renter_name;o["a"].searchAddress(e,t.pageSize,a).then((function(e){t.tableData=e.data,t.totalPage=e.total}));break;case 2:var n=t.renter_name;o["a"].searchHousehold(e,t.pageSize,n).then((function(e){t.tableData=e.data,t.totalPage=e.total}))}else o["a"].households(e,t.pageSize).then((function(e){t.tableData=e.data,t.totalPage=e.total}))},handleSizeChange:function(e){var t=this;if(t.pageSize=e,t.renter_name)switch(t.type){case 1:var a=t.renter_name;o["a"].searchAddress(1,e,a).then((function(e){t.tableData=e.data,t.totalPage=e.total}));break;case 2:var n=t.renter_name;o["a"].searchHousehold(1,e,n).then((function(e){t.tableData=e.data,t.totalPage=e.total}))}else o["a"].households(t.currentPage,e).then((function(e){t.tableData=e.data,t.totalPage=e.total,t.currentPage=1}))},handleCurrentLogs:function(e){var t=this;t.currentLogsPage=e,o["a"].faceLogs(e,t.pageSizeLogs,t.face_id).then((function(e){t.logsData=e.data}))},handleSizeLogs:function(e){var t=this;t.pageSizeLogs=e,o["a"].faceLogs(t.currentLogsPage,e,t.face_id).then((function(e){t.logsData=e.data}))}}},s=i,l=(a("3cac"),a("2877")),d=Object(l["a"])(s,n,r,!1,null,"17838778",null);t["default"]=d.exports},d599:function(e,t,a){}}]);
//# sourceMappingURL=chunk-46f63dd2.93e83218.js.map