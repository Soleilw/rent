(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-054f4c16"],{"28a0":function(e,t){"function"===typeof Object.create?e.exports=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})}:e.exports=function(e,t){e.super_=t;var n=function(){};n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},3022:function(e,t,n){(function(e){var r=Object.getOwnPropertyDescriptors||function(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++)n[t[r]]=Object.getOwnPropertyDescriptor(e,t[r]);return n},a=/%[sdj%]/g;t.format=function(e){if(!S(e)){for(var t=[],n=0;n<arguments.length;n++)t.push(l(arguments[n]));return t.join(" ")}n=1;for(var r=arguments,o=r.length,i=String(e).replace(a,(function(e){if("%%"===e)return"%";if(n>=o)return e;switch(e){case"%s":return String(r[n++]);case"%d":return Number(r[n++]);case"%j":try{return JSON.stringify(r[n++])}catch(t){return"[Circular]"}default:return e}})),s=r[n];n<o;s=r[++n])v(s)||!z(s)?i+=" "+s:i+=" "+l(s);return i},t.deprecate=function(n,r){if("undefined"!==typeof e&&!0===e.noDeprecation)return n;if("undefined"===typeof e)return function(){return t.deprecate(n,r).apply(this,arguments)};var a=!1;function o(){if(!a){if(e.throwDeprecation)throw new Error(r);e.traceDeprecation?console.trace(r):console.error(r),a=!0}return n.apply(this,arguments)}return o};var o,i={};function l(e,n){var r={seen:[],stylize:c};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),y(n)?r.showHidden=n:n&&t._extend(r,n),D(r.showHidden)&&(r.showHidden=!1),D(r.depth)&&(r.depth=2),D(r.colors)&&(r.colors=!1),D(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=s),f(r,e,r.depth)}function s(e,t){var n=l.styles[t];return n?"["+l.colors[n][0]+"m"+e+"["+l.colors[n][1]+"m":e}function c(e,t){return e}function u(e){var t={};return e.forEach((function(e,n){t[e]=!0})),t}function f(e,n,r){if(e.customInspect&&n&&L(n.inspect)&&n.inspect!==t.inspect&&(!n.constructor||n.constructor.prototype!==n)){var a=n.inspect(r,e);return S(a)||(a=f(e,a,r)),a}var o=p(e,n);if(o)return o;var i=Object.keys(n),l=u(i);if(e.showHidden&&(i=Object.getOwnPropertyNames(n)),P(n)&&(i.indexOf("message")>=0||i.indexOf("description")>=0))return g(n);if(0===i.length){if(L(n)){var s=n.name?": "+n.name:"";return e.stylize("[Function"+s+"]","special")}if(j(n))return e.stylize(RegExp.prototype.toString.call(n),"regexp");if(_(n))return e.stylize(Date.prototype.toString.call(n),"date");if(P(n))return g(n)}var c,y="",v=!1,w=["{","}"];if(b(n)&&(v=!0,w=["[","]"]),L(n)){var x=n.name?": "+n.name:"";y=" [Function"+x+"]"}return j(n)&&(y=" "+RegExp.prototype.toString.call(n)),_(n)&&(y=" "+Date.prototype.toUTCString.call(n)),P(n)&&(y=" "+g(n)),0!==i.length||v&&0!=n.length?r<0?j(n)?e.stylize(RegExp.prototype.toString.call(n),"regexp"):e.stylize("[Object]","special"):(e.seen.push(n),c=v?d(e,n,r,l,i):i.map((function(t){return m(e,n,r,l,t,v)})),e.seen.pop(),h(c,y,w)):w[0]+y+w[1]}function p(e,t){if(D(t))return e.stylize("undefined","undefined");if(S(t)){var n="'"+JSON.stringify(t).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return e.stylize(n,"string")}return x(t)?e.stylize(""+t,"number"):y(t)?e.stylize(""+t,"boolean"):v(t)?e.stylize("null","null"):void 0}function g(e){return"["+Error.prototype.toString.call(e)+"]"}function d(e,t,n,r,a){for(var o=[],i=0,l=t.length;i<l;++i)N(t,String(i))?o.push(m(e,t,n,r,String(i),!0)):o.push("");return a.forEach((function(a){a.match(/^\d+$/)||o.push(m(e,t,n,r,a,!0))})),o}function m(e,t,n,r,a,o){var i,l,s;if(s=Object.getOwnPropertyDescriptor(t,a)||{value:t[a]},s.get?l=s.set?e.stylize("[Getter/Setter]","special"):e.stylize("[Getter]","special"):s.set&&(l=e.stylize("[Setter]","special")),N(r,a)||(i="["+a+"]"),l||(e.seen.indexOf(s.value)<0?(l=v(n)?f(e,s.value,null):f(e,s.value,n-1),l.indexOf("\n")>-1&&(l=o?l.split("\n").map((function(e){return"  "+e})).join("\n").substr(2):"\n"+l.split("\n").map((function(e){return"   "+e})).join("\n"))):l=e.stylize("[Circular]","special")),D(i)){if(o&&a.match(/^\d+$/))return l;i=JSON.stringify(""+a),i.match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(i=i.substr(1,i.length-2),i=e.stylize(i,"name")):(i=i.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),i=e.stylize(i,"string"))}return i+": "+l}function h(e,t,n){var r=e.reduce((function(e,t){return t.indexOf("\n")>=0&&0,e+t.replace(/\u001b\[\d\d?m/g,"").length+1}),0);return r>60?n[0]+(""===t?"":t+"\n ")+" "+e.join(",\n  ")+" "+n[1]:n[0]+t+" "+e.join(", ")+" "+n[1]}function b(e){return Array.isArray(e)}function y(e){return"boolean"===typeof e}function v(e){return null===e}function w(e){return null==e}function x(e){return"number"===typeof e}function S(e){return"string"===typeof e}function O(e){return"symbol"===typeof e}function D(e){return void 0===e}function j(e){return z(e)&&"[object RegExp]"===E(e)}function z(e){return"object"===typeof e&&null!==e}function _(e){return z(e)&&"[object Date]"===E(e)}function P(e){return z(e)&&("[object Error]"===E(e)||e instanceof Error)}function L(e){return"function"===typeof e}function k(e){return null===e||"boolean"===typeof e||"number"===typeof e||"string"===typeof e||"symbol"===typeof e||"undefined"===typeof e}function E(e){return Object.prototype.toString.call(e)}function F(e){return e<10?"0"+e.toString(10):e.toString(10)}t.debuglog=function(n){if(D(o)&&(o=Object({NODE_ENV:"production",BASE_URL:"/"}).NODE_DEBUG||""),n=n.toUpperCase(),!i[n])if(new RegExp("\\b"+n+"\\b","i").test(o)){var r=e.pid;i[n]=function(){var e=t.format.apply(t,arguments);console.error("%s %d: %s",n,r,e)}}else i[n]=function(){};return i[n]},t.inspect=l,l.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},l.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},t.isArray=b,t.isBoolean=y,t.isNull=v,t.isNullOrUndefined=w,t.isNumber=x,t.isString=S,t.isSymbol=O,t.isUndefined=D,t.isRegExp=j,t.isObject=z,t.isDate=_,t.isError=P,t.isFunction=L,t.isPrimitive=k,t.isBuffer=n("d60a");var C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function $(){var e=new Date,t=[F(e.getHours()),F(e.getMinutes()),F(e.getSeconds())].join(":");return[e.getDate(),C[e.getMonth()],t].join(" ")}function N(e,t){return Object.prototype.hasOwnProperty.call(e,t)}t.log=function(){console.log("%s - %s",$(),t.format.apply(t,arguments))},t.inherits=n("28a0"),t._extend=function(e,t){if(!t||!z(t))return e;var n=Object.keys(t),r=n.length;while(r--)e[n[r]]=t[n[r]];return e};var T="undefined"!==typeof Symbol?Symbol("util.promisify.custom"):void 0;function A(e,t){if(!e){var n=new Error("Promise was rejected with a falsy value");n.reason=e,e=n}return t(e)}function M(t){if("function"!==typeof t)throw new TypeError('The "original" argument must be of type Function');function n(){for(var n=[],r=0;r<arguments.length;r++)n.push(arguments[r]);var a=n.pop();if("function"!==typeof a)throw new TypeError("The last argument must be of type Function");var o=this,i=function(){return a.apply(o,arguments)};t.apply(this,n).then((function(t){e.nextTick(i,null,t)}),(function(t){e.nextTick(A,t,i)}))}return Object.setPrototypeOf(n,Object.getPrototypeOf(t)),Object.defineProperties(n,r(t)),n}t.promisify=function(e){if("function"!==typeof e)throw new TypeError('The "original" argument must be of type Function');if(T&&e[T]){var t=e[T];if("function"!==typeof t)throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),t}function t(){for(var t,n,r=new Promise((function(e,r){t=e,n=r})),a=[],o=0;o<arguments.length;o++)a.push(arguments[o]);a.push((function(e,r){e?n(e):t(r)}));try{e.apply(this,a)}catch(i){n(i)}return r}return Object.setPrototypeOf(t,Object.getPrototypeOf(e)),T&&Object.defineProperty(t,T,{value:t,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(t,r(e))},t.promisify.custom=T,t.callbackify=M}).call(this,n("4362"))},6576:function(e,t,n){},"9e8d":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[n("div",{staticClass:"btn"},[n("el-button",{attrs:{type:"primary"},on:{click:e.addDangerFace}},[e._v("添加可疑人物")])],1),n("el-dialog",{attrs:{title:"添加可疑人物",visible:e.dialogDangerFace,"close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDangerFace=t}}},[n("div",{staticClass:"box"},[n("el-form",{attrs:{model:e.form,"label-width":"100px"}},[n("el-form-item",{attrs:{label:"姓名"}},[n("el-input",{staticStyle:{width:"220px"},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}})],1),n("el-form-item",{attrs:{label:"证件号"}},[n("el-input",{staticStyle:{width:"220px"},model:{value:e.form.number,callback:function(t){e.$set(e.form,"number",t)},expression:"form.number"}})],1),n("el-form-item",{attrs:{label:"相似度"}},[n("el-input",{staticStyle:{width:"220px"},model:{value:e.form.notify_score,callback:function(t){e.$set(e.form,"notify_score",t)},expression:"form.notify_score"}})],1),n("el-form-item",{attrs:{label:"手机号"}},[n("el-input",{staticStyle:{width:"220px"},model:{value:e.form.notify_user,callback:function(t){e.$set(e.form,"notify_user",t)},expression:"form.notify_user"}})],1),n("el-form-item",{attrs:{label:"地址"}},[n("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[n("el-select",{attrs:{placeholder:"请选择地址"},on:{change:e.addressChange},model:{value:e.form.address,callback:function(t){e.$set(e.form,"address",t)},expression:"form.address"}},e._l(e.addressList,(function(e){return n("el-option",{key:e.id,attrs:{label:e.address,value:e.id}})})),1)],1)]),n("el-form-item",{attrs:{label:"人脸图片"}},[n("el-upload",{ref:"upload",attrs:{action:"https://api.fengniaotuangou.cn/api/upload",limit:1,"before-upload":e.beforeAvatarUpload,"on-change":e.handleChange,"on-success":e.handleAvatarSuccess,"on-remove":e.handleRemove,"on-exceed":e.handleExceed,"auto-upload":!1}},[n("el-button",{attrs:{size:"small",type:"primary"}},[e._v("选择图片")])],1),e.hasNewImage?n("div",{staticStyle:{color:"red","font-size":"12px"}},[e._v("* 点击文件名可删除所选图片")]):e._e(),n("div",{staticClass:"up-img"},[n("img",{staticClass:"pic-box",attrs:{src:e.form.href}})])],1),n("div",{staticClass:"submit"},[n("el-form-item",[n("el-button",{attrs:{type:"primary"},on:{click:e.upload}},[e._v("提交")])],1)],1)],1)],1)]),n("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据"}},[n("el-table-column",{attrs:{prop:"id",label:"ID",align:"center"}}),n("el-table-column",{attrs:{prop:"",label:"设备ID",align:"center"}}),n("el-table-column",{attrs:{prop:"name",label:"名称",align:"center"}}),n("el-table-column",{attrs:{prop:"created_at",label:"时间",align:"center"}}),n("el-table-column",{attrs:{prop:"number",label:"人脸证件号",align:"center"}}),n("el-table-column",{attrs:{prop:"href",label:"人脸图片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.href?n("div",[n("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[n("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.href}}),n("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.href},slot:"reference"})])],1):n("div",[n("span",[e._v("--暂无图片--")])])]}}])}),n("el-table-column",{attrs:{label:"操作",align:"center",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[n("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(n){return e.handleLogs(t.$index,t.row)}}},[e._v("进出记录")])]}}])})],1),n("el-dialog",{attrs:{title:"进出记录",visible:e.dialogLogs},on:{"update:visible":function(t){e.dialogLogs=t}}},[n("div",{staticClass:"box"},[n("el-table",{attrs:{data:e.logsData}},[n("el-table-column",{attrs:{prop:"danger.name",label:"姓名",align:"center"}}),n("el-table-column",{attrs:{prop:"address",label:"地址",align:"center"}}),n("el-table-column",{attrs:{prop:"danger.number",label:"证件号",align:"center"}}),n("el-table-column",{attrs:{prop:"log.timestamp",label:"时间",align:"center"}}),n("el-table-column",{attrs:{prop:"danger.href",label:"人脸照片",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.danger.href?n("div",[n("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[n("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.danger.href}}),n("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.danger.href},slot:"reference"})])],1):n("div",[n("span",[e._v("--暂无图片--")])])]}}])})],1)],1),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.currentLogsPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSizeLogs,layout:"sizes, prev, pager, next, jumper",total:e.totalLogsPage},on:{"current-change":e.handleCurrentLogs,"update:currentPage":function(t){e.currentLogsPage=t},"update:current-page":function(t){e.currentLogsPage=t},"size-change":e.handleSizeLogs}})],1)]),n("div",{staticClass:"block"},[n("el-pagination",{attrs:{"current-page":e.currentPage,"page-sizes":[10,20,30,40,50],"page-size":e.pageSize,layout:"sizes, prev, pager, next, jumper",total:e.totalPage},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"size-change":e.handleSizeChange}})],1)],1)},a=[],o=(n("4160"),n("d3b7"),n("3ca3"),n("159b"),n("ddb0"),n("2b3d"),n("ade3")),i=n("365c"),l=(n("3022"),n("ac1f"),n("25f0"),n("5319"),{});function s(e){return e=e.toString(),e[1]?e:"0"+e}l.formatTime=function(e,t){var n=["Y","M","D","h","m","s"],r=[],a=new Date(1e3*e);for(var o in r.push(a.getFullYear()),r.push(s(a.getMonth()+1)),r.push(s(a.getDate())),r.push(s(a.getHours())),r.push(s(a.getMinutes())),r.push(s(a.getSeconds())),r)t=t.replace(n[o],r[o]);return t};var c=l,u={data:function(){var e;return e={loading:!1,tableData:[],currentPage:1,pageSize:10,totalPage:0,dialogDangerFace:!1,form:{href:""},qiniuaddr:"https://tu.fengniaotuangou.cn",hasNewImage:!1},Object(o["a"])(e,"form",{name:"",number:"",href:"",notify_score:"",notify_user:"",address_id:""}),Object(o["a"])(e,"addressList",[]),Object(o["a"])(e,"dialogLogs",!1),Object(o["a"])(e,"logsData",[]),Object(o["a"])(e,"danger_id",""),Object(o["a"])(e,"currentLogsPage",1),Object(o["a"])(e,"pageSizeLogs",10),Object(o["a"])(e,"totalLogsPage",0),e},mounted:function(){this.getDangerFace()},methods:{getDangerFace:function(){var e=this;i["a"].dangerFace(e.currentPage,e.pageSize).then((function(t){console.log("getDangerFace",t.data.data),e.tableData=t.data.data,e.totalPage=t.data.total}))},getAddress:function(){var e=this;i["a"].address(e.currentPage,e.pageSize).then((function(t){console.log("getAddress",t),e.addressList=t.data}))},addressChange:function(e){var t=this;t.form.address_id=e,console.log(t.form.address_id)},addDangerFace:function(){var e=this;e.dialogDangerFace=!0,e.getAddress()},handleLogs:function(e,t){var n=this;n.dialogLogs=!0,n.danger_id=t.danger_id,console.log(t),n.getFaceLogs()},getFaceLogs:function(){var e=this;i["a"].dangerLog(e.currentLogsPage,e.pageSizeLogs,e.danger_id).then((function(t){console.log("getFaceLogs",t.data.data),e.logsData=t.data.data,e.totalLogsPage=t.data.total,e.logsData.forEach((function(e){e.log.timestamp=c.formatTime(e.log.timestamp,"Y-M-D h:m:s")}))}))},handleRemove:function(e,t){var n=this;n.form.href="",n.hasNewImage=!1},beforeAvatarUpload:function(e){var t=e.size/1024/1024<2;return t||this.$message.error("上传图片大小不能超过 2MB!"),t},handleChange:function(e){var t=this;t.form.href=URL.createObjectURL(e.raw),t.hasNewImage=!0},handleAvatarSuccess:function(e,t){var n=this;t.url=e.data,n.form.href=t.url,i["a"].addDangerFace(n.form).then((function(e){n.$message.success("上传成功"),n.currentPage=1,n.getDangerFace(),n.$refs.upload.clearFiles(),n.form={name:"",number:"",href:"",notify_score:"",notify_user:"",address_id:""},n.dialogDangerFace=!1}))},handleExceed:function(e,t){var n=this;n.$message.error("上传图片不能超过1张!"),n.$refs.upload.clearFiles(),n.form.href="",n.form.id=""},upload:function(){var e=this;e.$refs.upload.submit()},getQiniuToken:function(){var e=this;axios.get("https://api.fengniaotuangou.cn/api/upload/token").then((function(t){e.imgData.token=t.data.uptoken}))},handleCurrentChange:function(e){var t=this;console.log(e),t.currentPage=e,i["a"].dangerFace(e,t.pageSize).then((function(e){t.tableData=e.data.data}))},handleSizeChange:function(e){var t=this;console.log(e),t.pageSize=e,i["a"].dangerFace(t.currentPage,e).then((function(e){t.tableData=e.data.data,t.totalPage=e.data.total,t.currentPage=1}))},handleCurrentLogs:function(e){var t=this;t.currentLogsPage=e,i["a"].dangerLog(e,t.pageSizeLogs,t.danger_id).then((function(e){t.logsData=e.data.data,t.logsData.forEach((function(e){e.log.timestamp=c.formatTime(e.log.timestamp,"Y-M-D h:m:s")}))}))},handleSizeLogs:function(e){var t=this;t.pageSizeLogs=e,i["a"].dangerLog(t.currentLogsPage,e,t.danger_id).then((function(e){t.logsData=e.data.data,t.logsData.forEach((function(e){e.log.timestamp=c.formatTime(e.log.timestamp,"Y-M-D h:m:s")}))}))}}},f=u,p=(n("eab0"),n("2877")),g=Object(p["a"])(f,r,a,!1,null,"6f84c342",null);t["default"]=g.exports},d60a:function(e,t){e.exports=function(e){return e&&"object"===typeof e&&"function"===typeof e.copy&&"function"===typeof e.fill&&"function"===typeof e.readUInt8}},eab0:function(e,t,n){"use strict";var r=n("6576"),a=n.n(r);a.a}}]);
//# sourceMappingURL=chunk-054f4c16.04c06d47.js.map