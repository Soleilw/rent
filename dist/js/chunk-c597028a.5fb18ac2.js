(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c597028a"],{"25e3":function(e,t,a){},4238:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addRole}},[e._v("添加角色")])],1)]),a("el-table",{attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f0f0f0"}}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"name",label:"角色名"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑权限")]),a("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除角色",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该角色")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1),a("el-dialog",{attrs:{title:"添加角色",visible:e.dialogRole,width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRole=t}}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.form,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"角色名称"}},[a("el-input",{attrs:{placeholder:"请输入角色名",disabled:e.disabledRole},model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"选择权限"}},[a("el-checkbox",{on:{change:e.AllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"resident",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("住户管理页")])]),a("el-checkbox",{attrs:{label:"residentGet"},on:{change:e.oneChange}},[e._v("获取住户")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"house",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("房屋管理页")])]),a("el-checkbox",{attrs:{label:"houses"},on:{change:e.oneChange}},[e._v("房屋列表")]),a("el-checkbox",{attrs:{label:"renting"},on:{change:e.oneChange}},[e._v("租赁列表")]),a("el-checkbox",{attrs:{label:"demoIndex"},on:{change:e.oneChange}},[e._v("信息模板发布")]),a("el-checkbox",{attrs:{label:"housesAdd"},on:{change:e.oneChange}},[e._v("新增房屋")]),a("el-checkbox",{attrs:{label:"housesGet"},on:{change:e.oneChange}},[e._v("获取房屋")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"picture",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("图文管理")])]),a("el-checkbox",{attrs:{label:"banner"},on:{change:e.oneChange}},[e._v("轮播图")]),a("el-checkbox",{attrs:{label:"bannerAdd"},on:{change:e.oneChange}},[e._v("添加轮播图")]),a("el-checkbox",{attrs:{label:"bannerGet"},on:{change:e.oneChange}},[e._v("获取轮播图")]),a("el-checkbox",{attrs:{label:"bannerDel"},on:{change:e.oneChange}},[e._v("删除轮播图")]),a("el-checkbox",{attrs:{label:"document"},on:{change:e.oneChange}},[e._v("文档管理")]),a("el-checkbox",{attrs:{label:"documentAdd"},on:{change:e.oneChange}},[e._v("添加文档")]),a("el-checkbox",{attrs:{label:"documentGet"},on:{change:e.oneChange}},[e._v("获取文档")]),a("el-checkbox",{attrs:{label:"documentDel"},on:{change:e.oneChange}},[e._v("删除文档")]),a("el-checkbox",{attrs:{label:"documentEdit"},on:{change:e.oneChange}},[e._v("编辑文档")]),a("el-checkbox",{attrs:{label:"recruit"},on:{change:e.oneChange}},[e._v("人才招聘")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"message",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("资讯管理")])]),a("el-checkbox",{attrs:{label:"message"},on:{change:e.oneChange}},[e._v("资讯管理")]),a("el-checkbox",{attrs:{label:"messageAdd"},on:{change:e.oneChange}},[e._v("添加资讯")]),a("el-checkbox",{attrs:{label:"messageGet"},on:{change:e.oneChange}},[e._v("获取资讯")]),a("el-checkbox",{attrs:{label:"messageDel"},on:{change:e.oneChange}},[e._v("删除资讯")]),a("el-checkbox",{attrs:{label:"messageEdit"},on:{change:e.oneChange}},[e._v("编辑")]),a("el-checkbox",{attrs:{label:"typeAdd"},on:{change:e.oneChange}},[e._v("添加资讯类型")]),a("el-checkbox",{attrs:{label:"typeGet"},on:{change:e.oneChange}},[e._v("获取资讯类型")]),a("el-checkbox",{attrs:{label:"typeDel"},on:{change:e.oneChange}},[e._v("删除")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"permission",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("角色管理页")])]),a("el-checkbox",{attrs:{label:"roleAdd"},on:{change:e.oneChange}},[e._v("新增角色")]),a("el-checkbox",{attrs:{label:"roleDel"},on:{change:e.oneChange}},[e._v("删除角色")]),a("el-checkbox",{attrs:{label:"roleEdit"},on:{change:e.oneChange}},[e._v("编辑权限")]),a("el-checkbox",{attrs:{label:"roleGet"},on:{change:e.oneChange}},[e._v("获取角色列表")])],1)],1),a("div",{staticClass:"permission",staticStyle:{"margin-left":"140px"}},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"manageAdd"},on:{change:e.oneChange}},[e._v("新增管理员")]),a("el-checkbox",{attrs:{label:"manageDel"},on:{change:e.oneChange}},[e._v("删除管理员")]),a("el-checkbox",{attrs:{label:"manageEdit"},on:{change:e.oneChange}},[e._v("编辑管理员")]),a("el-checkbox",{attrs:{label:"manageGet"},on:{change:e.oneChange}},[e._v("管理员列表")]),a("el-checkbox",{attrs:{label:"manageResetPwd"},on:{change:e.oneChange}},[e._v("重置密码")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"buy",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("购买服务管理页")])]),a("el-checkbox",{attrs:{label:"buyAdd"},on:{change:e.oneChange}},[e._v("添加购买服务")]),a("el-checkbox",{attrs:{label:"compileBuy"},on:{change:e.oneChange}},[e._v("编辑服务")]),a("el-checkbox",{attrs:{label:"orderServe"},on:{change:e.oneChange}},[e._v("服务订单")]),a("el-checkbox",{attrs:{label:"checkBuy"},on:{change:e.oneChange}},[e._v("查询服务")]),a("el-checkbox",{attrs:{label:"delBuy"},on:{change:e.oneChange}},[e._v("删除")])],1)],1),a("div",{staticClass:"permission"},[a("el-checkbox-group",{staticClass:"permission-item",model:{value:e.form.permissions,callback:function(t){e.$set(e.form,"permissions",t)},expression:"form.permissions"}},[a("el-checkbox",{attrs:{label:"order",border:""},on:{change:e.oneChange}},[a("span",{staticStyle:{"font-weight":"bold"}},[e._v("服务订单列表")])])],1)],1)],1),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newRole}},[e._v("提交")])],1)],1)],1)],1)])],1)},i=[],s=(a("b0c0"),a("365c")),o=(a("3022"),{data:function(){return{loading:!0,dialogRole:!1,form:{title:"",name:"",permissions:[]},stateList:[{label:"启用",value:1},{label:"禁用",value:0}],tableData:[],checkAll:!1,permissionList:["resident","residentGet","house","houses","housesAdd","housesGet","renting","picture","banner","bannerAdd","bannerGet","bannerDel","message","messageAdd","messageGet","messageDel","messageEdit","typeAdd","typeGet","typeDel","document","documentAdd","documentGet","documentDel","documentEdit","buy","buyAdd","compileBuy","orderServe","delBuy","checkBuy","suspected","permission","roleGet","roleAdd","roleEdit","roleDel","manageGet","manageAdd","manageEdit","manageDel","manageResetPwd","switch","refund","recruit","demoIndex","order"],areaPerson:["resident","residentGet","house","houses","housesAdd","housesGet","renting","picture","banner","bannerAdd","bannerGet","bannerDel","message","messageAdd","messageGet","messageDel","messageEdit","typeAdd","typeGet","typeDel","document","documentAdd","documentGet","documentDel","documentEdit","suspected","permission","roleGet","roleAdd","roleEdit","roleDel","manageGet","manageAdd","manageEdit","manageDel","manageResetPwd","order"],dialogDel:!1,id:"",disabledRole:!1,current:1,size:10,total:0,role:localStorage.getItem("role")}},mounted:function(){this.getRoles(this.current,this.size)},methods:{getRoles:function(e,t){var a=this;s["a"].getRole(e,t).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},currentChange:function(e){var t=this;t.current=e,t.loading=!0,t.getRoles(e,t.size)},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,t.getRoles(1,e),t.current=1},addRole:function(){var e=this;e.dialogRole=!0,e.form={title:"",name:"",permissions:[]},e.disabledRole=!1,e.checkAll=!0,!0===e.checkAll&&(e.form.permissions=e.checkAll?e.permissionList:[])},newRole:function(){var e=this;e.form.name=e.form.title,s["a"].role(e.form).then((function(t){e.dialogRole=!1,e.$message.success("提交成功"),e.getRoles(e.current,e.size),e.current=1,e.form={},e.form.permissions=[]}))},handleEdit:function(e,t){var a=this;a.dialogRole=!0,a.disabledRole=!0,a.form=t,a.form.permissions=t.permissions,a.checkAll=t.permissions.length>=a.permissionList.length},AllChange:function(e){var t=this;"admin"==localStorage.getItem("username")&&"admin"==t.form.name?t.form.permissions=e?t.permissionList:[]:t.form.permissions=e?t.areaPerson:[]},oneChange:function(e){var t=this;console.log(t.form.permissions),t.checkAll=t.form.permissions.length>=t.permissionList.length},handleDel:function(e,t){var a=this;a.dialogDel=!0,a.id=t.id},toDel:function(){var e=this;s["a"].delRole(e.id).then((function(t){e.$message.success("删除成功"),e.dialogDel=!1,e.getRoles(e.current,e.size)}))}}}),l=o,r=(a("51ec"),a("2877")),c=Object(r["a"])(l,n,i,!1,null,"03d045a0",null);t["a"]=c.exports},"51ec":function(e,t,a){"use strict";var n=a("25e3"),i=a.n(n);i.a},"8ed5":function(e,t,a){"use strict";var n=a("e5ad"),i=a.n(n);i.a},bf89:function(e,t,a){"use strict";var n=a("fdf0"),i=a.n(n);i.a},d42e:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-tabs",{on:{"tab-click":e.changeActive},model:{value:e.activeName,callback:function(t){e.activeName=t},expression:"activeName"}},[a("el-tab-pane",{attrs:{label:"用户白名单",name:"role"}},[a("v-user")],1),a("el-tab-pane",{attrs:{label:"户主佣金",name:"user"}},[a("v-owner")],1)],1)],1)},i=[],s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入用户名/地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.renter_name)}},model:{value:e.renter_name,callback:function(t){e.renter_name=t},expression:"renter_name"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择搜索方式"},on:{change:e.changeType},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.renter_name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加白名单")])],1)]),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"address_id",label:"地址ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"250px"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("启用返现功能")]):2==t.row.state?a("span",[e._v("禁用返现功能")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRec(t.$index,t.row)}}},[e._v("返佣记录 ")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleSource(t.$index,t.row)}}},[e._v(" 佣金来源")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑 ")])],1),a("el-dropdown-item",[2==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleUsing(t.$index,t.row)}}},[e._v("启用返现功能")]):e._e()],1),a("el-dropdown-item",[1==t.row.state?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleBan(t.$index,t.row)}}},[e._v("禁用返现功能")]):e._e()],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除 ")])],1)],1)],1)]}}])})],1),a("el-dialog",{attrs:{title:"添加白名单",visible:e.dialogList,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.dialogList=t},close:e.closeList}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.listForm}},[e._l(e.listForm.service,(function(t,n){return a("div",{key:n},[e.isAdd?a("el-form-item",{attrs:{label:"选择省份"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.proChange},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.proList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择市级"}},[a("el-select",{attrs:{placeholder:"请选择市级"},on:{change:e.cityChange},model:{value:e.city_id,callback:function(t){e.city_id=t},expression:"city_id"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择区级"}},[a("el-select",{attrs:{placeholder:"请选择区级"},on:{change:e.areasChange},model:{value:e.community_id,callback:function(t){e.community_id=t},expression:"community_id"}},e._l(e.communityList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择社区"}},[a("el-select",{attrs:{placeholder:"请选择社区"},on:{change:e.changeAreaType},model:{value:e.area_id,callback:function(t){e.area_id=t},expression:"area_id"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"选择地址"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择地址",disabled:e.isDisabled},on:{change:e.selectSize},model:{value:t.address_id,callback:function(a){e.$set(t,"address_id",a)},expression:"item.address_id"}},e._l(e.addressList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.address,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"选择用户"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择用户",disabled:e.isDisabled},model:{value:t.user_id,callback:function(a){e.$set(t,"user_id",a)},expression:"item.user_id"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.snapshot.name,value:e.user_id}})})),1)],1),a("el-form-item",{attrs:{label:"输入金额"}},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select ipt",attrs:{placeholder:"请输入金额"},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"item.money"}})],1)]),a("el-form-item",{attrs:{label:"返现状态"}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择状态"},model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},e._l(e.stateList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.value}})})),1)],1)],1)})),e.isAdd?a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addopenList}},[e._v("添加")]),a("el-button",{attrs:{type:"primary"},on:{click:e.delopenList}},[e._v("删除")])],1):e._e(),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newList}},[e._v("提交")])],1)],1)],2)],1)]),a("el-dialog",{attrs:{title:"返佣记录",visible:e.dialogRecord,width:"80%"},on:{"update:visible":function(t){e.dialogRecord=t}}},[a("el-table",{attrs:{data:e.recordDate,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"记录ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("待返现")]):2==t.row.state?a("span",[e._v("返现成功")]):3==t.row.state?a("span",[e._v("返现失败")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown-item",[1==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRefund(t.$index,t.row)}}},[e._v(" 手动返现")]):e._e(),3==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRefund(t.$index,t.row)}}},[e._v(" 重新返现")]):e._e()],1)]}}])})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.recordCurrent,"page-size":e.recordSize,layout:"sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"current-change":e.recordCurrentChange,"update:currentPage":function(t){e.recordCurrent=t},"update:current-page":function(t){e.recordCurrent=t},"size-change":e.recordSizeChange}})],1)],1),a("el-dialog",{attrs:{title:"佣金来源",visible:e.dialogRec,width:"80%"},on:{"update:visible":function(t){e.dialogRec=t}}},[a("el-table",{attrs:{data:e.recDate,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"记录ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"order_no",label:"订单号"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"title",label:"服务名称"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.recCurrent,"page-size":e.recSize,layout:"sizes, prev, pager, next, jumper",total:e.recTotal},on:{"current-change":e.recCurrentChange,"update:currentPage":function(t){e.recCurrent=t},"update:current-page":function(t){e.recCurrent=t},"size-change":e.recSizeChange}})],1)],1),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除记录",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该记录")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogBan,title:"禁用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogBan=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户禁用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toBan}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogBan=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogUsing,title:"启用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogUsing=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户启用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toUsing}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogUsing=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogRefund,title:"返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRefund=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户进行返现 "),a("br"),a("span",{staticStyle:{"font-size":"15px",color:"red"}},[e._v("(如返现失败请稍后重试！)")])]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toRefund}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogRefund=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},o=[],l=a("365c"),r=(a("4238"),{inject:["reload"],data:function(){return{loading:!0,tableData:[],recordDate:[],current:1,size:10,total:0,recordCurrent:1,recordSize:10,recordTotal:0,recCurrent:1,recSize:10,recTotal:0,renter_name:"",type:2,typeList:[{value:1,label:"按地址搜索"},{value:2,label:"按用户名搜索"}],dialogList:!1,dialogRec:!1,dialogRecord:!1,dialogRefund:!1,dialogDel:!1,dialogBan:!1,dialogUsing:!1,listForm:{id:"",service:[]},addressList:[],userList:[],monList:[],stateList:[{name:"启用返现",value:1},{name:"禁用返现",value:2}],name:"",areaList:[],address_id:"",typeDisabled:!0,id:"",user_id:"",isAdd:!0,isDisabled:!1,isBan:!1,area_id:"",typeUser:"",recDate:[],payId:"",refundState:"",proList:[],pro_id:"",cityList:[],city_id:"",communityList:[],community_id:""}},mounted:function(){this.getList(this.current,this.size)},methods:{getList:function(e,t){var a=this;l["a"].commission(e,t).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},currentChange:function(e){var t=this;if(t.current=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(e,t.size,n,a);break;case 2:var n=t.renter_name;t.fucSearch(e,t.size,n,a);break}else t.getList(e,t.size)},sizeChange:function(e){var t=this;if(t.size=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(1,e,n,a);break;case 2:var n=t.renter_name;t.fucSearch(1,e,n,a)}else t.getList(1,e);t.current=1},changeType:function(e){var t=this;t.typeDisabled=!0,t.renter_name="",t.current=1,t.getList(t.current,t.size)},fucSearch:function(e,t,a,n){var i=this;l["a"].commission(e,t,a,n).then((function(e){i.loading=!1,i.tableData=e.data,i.total=e.total,i.$message.success("搜索成功！")}))},search:function(){var e=this;if(e.current=1,e.size=10,e.loading=!0,1==e.type){var t=e.renter_name;e.fucSearch(e.current,e.size,a,t)}if(2==e.type){var a=e.renter_name;e.fucSearch(e.current,e.size,a,t)}},addUser:function(){var e=this;e.dialogList=!0,e.listForm={id:"",service:[]},e.addopenList(),e.isAdd=!0,e.isDisabled=!1,this.getPro()},getPro:function(){var e=this;l["a"].areas(1,4e3,0).then((function(t){e.proList=t.data}))},getCity:function(e){var t=this;l["a"].areas(1,4e3,e).then((function(e){t.cityList=e.data}))},getCommunity:function(e){var t=this;l["a"].areas(1,100,e).then((function(e){t.communityList=e.data}))},proChange:function(e){var t=this;t.getCity(e)},getAreas:function(e){var t=this;l["a"].areas(1,4e3,e).then((function(e){t.areaList=e.data}))},cityChange:function(e){var t=this;t.getCommunity(e)},areasChange:function(e){var t=this;t.getAreas(e)},changeAreaType:function(e){var t=this;t.area_id=e;var a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l["a"].notCommission(t.area_id).then((function(e){t.addressList=e,a.close()})).catch((function(e){a.close()}))},selectSize:function(e){var t=this;t.address_id=e,l["a"].rent(1,100,t.address_id,1).then((function(e){t.userList=e.data}))},addopenList:function(){var e=this;e.listForm.service.push({})},delopenList:function(){var e=this;e.listForm.service.pop({})},newList:function(){var e=this;e.dialogList=!1,console.log(e.listForm),e.isAdd?l["a"].createCommission(e.listForm).then((function(t){e.$message.success("添加成功！"),e.getList(e.current,e.size),e.listForm={id:"",service:[]}})):l["a"].createCommission(e.listForm).then((function(t){e.$message.success("提交成功！"),e.getList(e.current,e.size)}))},closeList:function(){var e=this;e.isAdd=!0,e.delopenList(),e.listForm.service=[],e.pro_id="",e.cityList=[],e.city_id="",e.communityList=[],e.community_id=""},getCommissionRec:function(e,t){var a=this;l["a"].commissionRec(e,t,a.address_id).then((function(e){a.$message.success("获取数据成功！"),a.recordDate=e.data,a.recordTotal=e.total}))},handleRec:function(e,t){var a=this;a.dialogRecord=!0,a.address_id=t.address_id,a.refundState=t.state,a.recordCurrent=1,a.getCommissionRec(a.recordCurrent,a.recordSize)},recordCurrentChange:function(e){var t=this;t.recordCurrent=e,t.getCommissionRec(e,t.recordSize)},recordSizeChange:function(e){var t=this;t.recordSize=e,t.getCommissionRec(1,e),t.recordCurrent=1},getCommissionRecord:function(e,t){var a=this;l["a"].commissionRecord(e,t,a.address_id).then((function(e){a.$message.success("获取数据成功！"),a.recDate=e.data,a.recTotal=e.total}))},handleSource:function(e,t){var a=this;a.dialogRec=!0,a.address_id=t.address_id,a.recCurrent=1,a.getCommissionRecord(a.recCurrent,a.recSize)},recCurrentChange:function(e){var t=this;t.recCurrent=e,t.getCommissionRecord(e,t.recSize)},recSizeChange:function(e){var t=this;t.recSize=e,t.getCommissionRecord(1,e),t.recCurrent=1},handleEdit:function(e,t){var a=this;a.dialogList=!0,a.listForm={id:t.id,service:[{address_id:t.address_id,money:t.money,state:t.state,user_id:t.user_id}]},a.isAdd=!1,a.isDisabled=!0},handleDel:function(e,t){var a=this;a.dialogDel=!0,a.id=t.id},toDel:function(){var e=this;l["a"].delCommission(e.id).then((function(t){e.$message.success("删除成功！"),e.dialogDel=!1,e.getList(e.current,e.size)}))},handleUsing:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:1}]},a.dialogUsing=!0},toUsing:function(){var e=this;l["a"].createCommission(e.listForm).then((function(t){e.$message.success("启用成功！"),e.dialogUsing=!1,e.getList(e.current,e.size),e.listForm.service=[]}))},handleBan:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:2}]},a.dialogBan=!0},toBan:function(){var e=this;l["a"].createCommission(e.listForm).then((function(t){e.$message.success("禁用成功！"),e.dialogBan=!1,e.getList(e.current,e.size),e.listForm.service=[]}))},handleRefund:function(e,t){var a=this;a.payId=t.id,1==a.refundState?a.dialogRefund=!0:a.$message.warning("该用户已经被禁用返现功能, 请先开启功能! ")},toRefund:function(){var e=this,t=e.$loading({lock:!0,text:"返现中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l["a"].payCommission(e.payId).then((function(a){10004==a.code?t.close():(e.$message.success("返现成功！"),t.close(),e.dialogRefund=!1)})).catch((function(e){t.close()}))},refresh:function(){this.reload()}}}),c=r,d=(a("8ed5"),a("2877")),u=Object(d["a"])(c,s,o,!1,null,"0d1ecaa0",null),m=u.exports,p=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入用户名/地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.renter_name)}},model:{value:e.renter_name,callback:function(t){e.renter_name=t},expression:"renter_name"}},[a("el-select",{staticStyle:{width:"150px"},attrs:{slot:"prepend",placeholder:"请选择搜索方式"},on:{change:e.changeType},slot:"prepend",model:{value:e.type,callback:function(t){e.type=t},expression:"type"}},e._l(e.typeList,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.renter_name)}},slot:"append"}),a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1),a("div",{staticClass:"btn"},[a("el-button",{attrs:{type:"primary"},on:{click:e.addUser}},[e._v("添加白名单")])],1)]),a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),a("el-table-column",{attrs:{prop:"address_id",label:"地址ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址",width:"250px"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"type",label:"身份类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?a("span",[e._v("户主")]):2==t.row.type?a("span",[e._v("租客")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("启用返现功能")]):2==t.row.state?a("span",[e._v("禁用返现功能")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),a("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-dropdown",[a("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),a("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),a("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRec(t.$index,t.row)}}},[e._v("返现记录")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleRefund(t.$index,t.row)}}},[e._v("手动返现")])],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleEdit(t.$index,t.row)}}},[e._v("编辑")])],1),a("el-dropdown-item",[2==t.row.state?a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.handleUsing(t.$index,t.row)}}},[e._v("启用返现功能")]):e._e()],1),a("el-dropdown-item",[1==t.row.state?a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleBan(t.$index,t.row)}}},[e._v("禁用返现功能")]):e._e()],1),a("el-dropdown-item",[a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.handleDel(t.$index,t.row)}}},[e._v("删除")])],1)],1)],1)]}}])})],1),a("el-dialog",{attrs:{title:"添加白名单",visible:e.dialogList,"close-on-click-modal":!1,width:"800px"},on:{"update:visible":function(t){e.dialogList=t},close:e.closeList}},[a("div",{staticClass:"box"},[a("el-form",{attrs:{model:e.listForm}},[e._l(e.listForm.service,(function(t,n){return a("div",{key:n},[e.isAdd?a("el-form-item",{attrs:{label:"选择省份"}},[a("el-select",{attrs:{placeholder:"请选择省份"},on:{change:e.proChange},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.proList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择市级"}},[a("el-select",{attrs:{placeholder:"请选择市级"},on:{change:e.cityChange},model:{value:e.city_id,callback:function(t){e.city_id=t},expression:"city_id"}},e._l(e.cityList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择区级"}},[a("el-select",{attrs:{placeholder:"请选择区级"},on:{change:e.areasChange},model:{value:e.community_id,callback:function(t){e.community_id=t},expression:"community_id"}},e._l(e.communityList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),e.isAdd?a("el-form-item",{attrs:{label:"选择社区"}},[a("el-select",{attrs:{placeholder:"请选择社区"},on:{change:e.changeAreaType},model:{value:t.area_id,callback:function(a){e.$set(t,"area_id",a)},expression:"item.area_id"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),a("el-form-item",{attrs:{label:"选择地址"}},[a("el-select",{attrs:{filterable:"",placeholder:"选择地址",disabled:e.isDisabled},on:{change:e.selectSize},model:{value:t.address_id,callback:function(a){e.$set(t,"address_id",a)},expression:"item.address_id"}},e._l(e.addressList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.address,value:e.id}})})),1)],1),a("el-form-item",{attrs:{label:"选择身份"}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择身份类型"},on:{change:e.selectType},model:{value:t.type,callback:function(a){e.$set(t,"type",a)},expression:"item.type"}},e._l(e.tyList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.type}})})),1)],1),a("el-form-item",{attrs:{label:"选择用户"}},[a("el-select",{attrs:{filterable:"",placeholder:"请选择用户",disabled:e.isDisabled},model:{value:t.user_id,callback:function(a){e.$set(t,"user_id",a)},expression:"item.user_id"}},e._l(e.userList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.snapshot.name,value:e.user_id}})})),1)],1),a("el-form-item",{attrs:{label:"输入金额"}},[a("div",{staticClass:"btn"},[a("el-input",{staticClass:"input-with-select ipt",attrs:{placeholder:"请输入金额"},model:{value:t.money,callback:function(a){e.$set(t,"money",a)},expression:"item.money"}})],1)]),a("el-form-item",{attrs:{label:"返现状态"}},[a("el-select",{attrs:{disabled:e.isDisabled,placeholder:"请选择状态"},model:{value:t.state,callback:function(a){e.$set(t,"state",a)},expression:"item.state"}},e._l(e.stateList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.name,value:e.value}})})),1)],1)],1)})),e.isAdd?a("el-form-item",{attrs:{label:"操作"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addopenList}},[e._v("添加")]),a("el-button",{attrs:{type:"primary"},on:{click:e.delopenList}},[e._v("删除")])],1):e._e(),a("div",{staticClass:"submit"},[a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.newList}},[e._v("提交")])],1)],1)],2)],1)]),a("el-dialog",{attrs:{title:"返现记录",visible:e.dialogRec,width:"80%"},on:{"update:visible":function(t){e.dialogRec=t}}},[a("el-table",{attrs:{data:e.recordDate,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"记录ID"}}),a("el-table-column",{attrs:{prop:"address",label:"地址"}}),a("el-table-column",{attrs:{prop:"name",label:"绑定用户"}}),a("el-table-column",{attrs:{prop:"money",label:"返现金额"}}),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),a("el-table-column",{attrs:{prop:"state",label:"返现状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.state?a("span",[e._v("待返现")]):2==t.row.state?a("span",[e._v("返现成功")]):3==t.row.state?a("span",[e._v("返现失败")]):e._e()]}}])}),a("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.recordCurrent,"page-size":e.recordSize,layout:"sizes, prev, pager, next, jumper",total:e.recordTotal},on:{"current-change":e.recordCurrentChange,"update:currentPage":function(t){e.recordCurrent=t},"update:current-page":function(t){e.recordCurrent=t},"size-change":e.recordSizeChange}})],1)],1),a("el-dialog",{attrs:{visible:e.dialogRefund,title:"返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRefund=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户进行返现 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toRefund}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogRefund=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogDel,title:"删除记录",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该记录")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogBan,title:"禁用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogBan=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户禁用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toBan}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogBan=!1}}},[e._v("取消")])],1)]),a("el-dialog",{attrs:{visible:e.dialogUsing,title:"启用返现",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogUsing=t}}},[a("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v(" 是否对该用户启用返现功能 ")]),a("span",[a("el-button",{attrs:{type:"primary"},on:{click:e.toUsing}},[e._v("确定")]),a("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogUsing=!1}}},[e._v("取消")])],1)]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},g=[],h={inject:["reload"],data:function(){return{loading:!0,tableData:[],recordDate:[],current:1,size:10,total:0,recordCurrent:1,recordSize:10,recordTotal:0,renter_name:"",type:2,typeList:[{value:1,label:"按地址搜索"},{value:2,label:"按用户名搜索"}],dialogList:!1,dialogRec:!1,dialogRefund:!1,dialogDel:!1,dialogBan:!1,dialogUsing:!1,listForm:{id:"",service:[]},addressList:[],userList:[],tyList:[{name:"户主",type:1},{name:"租客",type:2}],monList:[],stateList:[{name:"启用返现",value:1},{name:"禁用返现",value:2}],name:"",areaList:[],address_id:"",typeDisabled:!0,id:"",user_id:"",isAdd:!0,isDisabled:!1,isBan:!1,proList:[],pro_id:"",cityList:[],city_id:"",communityList:[],community_id:""}},mounted:function(){this.getList(this.current,this.size)},methods:{getList:function(e,t){var a=this;l["a"].withdraws(e,t).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},currentChange:function(e){var t=this;if(t.current=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(e,t.size,n,a);break;case 2:var n=t.renter_name;t.fucSearch(e,t.size,n,a)}else t.getList(e,t.size)},sizeChange:function(e){var t=this;if(t.size=e,t.loading=!0,t.renter_name)switch(t.type){case 1:var a=t.renter_name;t.fucSearch(1,e,n,a);break;case 2:var n=t.renter_name;t.fucSearch(1,e,n,a)}else t.getList(1,e);t.current=1},changeType:function(e){var t=this;t.typeDisabled=!0,t.renter_name="",t.current=1,t.getList(t.current,t.size)},fucSearch:function(e,t,a,n){var i=this;l["a"].withdraws(e,t,a,n).then((function(e){i.loading=!1,i.tableData=e.data,i.total=e.total,i.$message.success("搜索成功！")}))},search:function(){var e=this;if(e.current=1,e.size=10,e.loading=!0,1==e.type){var t=e.renter_name;e.fucSearch(e.current,e.size,a,t)}if(2==e.type){var a=e.renter_name;e.fucSearch(e.current,e.size,a,t)}},addUser:function(){var e=this;e.dialogList=!0,e.listForm={id:"",service:[]},e.addopenList(),e.isAdd=!0,e.isDisabled=!1,this.getPro()},getPro:function(){var e=this;l["a"].areas(1,4e3,0).then((function(t){e.proList=t.data}))},getCity:function(e){var t=this;l["a"].areas(1,4e3,e).then((function(e){t.cityList=e.data}))},getCommunity:function(e){var t=this;l["a"].areas(1,100,e).then((function(e){t.communityList=e.data}))},proChange:function(e){var t=this;t.getCity(e)},getAreas:function(e){var t=this;l["a"].areas(1,4e3,e).then((function(e){t.areaList=e.data}))},cityChange:function(e){var t=this;t.getCommunity(e)},areasChange:function(e){var t=this;t.getAreas(e)},changeAreaType:function(e){var t=this;t.area_id=e;var a=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l["a"].addresses(1,100,t.area_id).then((function(e){t.addressList=e.data,a.close()})).catch((function(e){a.close()}))},selectSize:function(e){var t=this;t.address_id=e},selectType:function(e){var t=this;l["a"].rent(1,100,t.address_id,e).then((function(e){t.userList=e.data}))},addopenList:function(){var e=this;e.listForm.service.push({})},delopenList:function(){var e=this;e.listForm.service.pop({})},newList:function(){var e=this;e.dialogList=!1,console.log(e.listForm),e.isAdd?l["a"].createRaw(e.listForm).then((function(t){e.$message.success("添加成功！"),e.getList(e.current,e.size),e.listForm={id:"",service:[]}})):l["a"].createRaw(e.listForm).then((function(t){e.$message.success("提交成功！"),e.getList(e.current,e.size)}))},closeList:function(){var e=this;e.isAdd=!0,e.delopenList(),e.listForm.service=[],e.pro_id="",e.cityList=[],e.city_id="",e.communityList=[],e.community_id=""},gatWithdrawsRec:function(e,t){var a=this;l["a"].withdrawsRec(e,t,a.user_id,a.address_id).then((function(e){a.$message.success("获取数据成功！"),a.recordDate=e.data,a.recordTotal=e.total}))},recordCurrentChange:function(e){var t=this;t.recordCurrent=e,t.gatWithdrawsRec(e,t.recordSize)},recordSizeChange:function(e){var t=this;t.recordSize=e,t.gatWithdrawsRec(1,e),t.recordCurrent=1},handleRec:function(e,t){var a=this;a.dialogRec=!0,a.user_id=t.user_id,a.address_id=t.address_id,a.recordCurrent=1,a.gatWithdrawsRec(a.recordCurrent,a.recordSize)},handleRefund:function(e,t){var a=this;a.id=t.id,1==t.state?a.dialogRefund=!0:a.$message.warning("该用户已经被禁用返现功能, 请先开启功能! ")},toRefund:function(){var e=this,t=e.$loading({lock:!0,text:"返现中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});l["a"].withdraw(e.id).then((function(a){e.$message.success("返现成功！"),t.close(),e.dialogRefund=!1})).catch((function(e){t.close()}))},handleEdit:function(e,t){var a=this;a.dialogList=!0,a.listForm={id:t.id,service:[{address_id:t.address_id,money:t.money,state:t.state,type:t.type,user_id:t.user_id}]},a.isAdd=!1,a.isDisabled=!0},handleDel:function(e,t){var a=this;a.dialogDel=!0,a.id=t.id},toDel:function(){var e=this;l["a"].delWhite(e.id).then((function(t){e.$message.success("删除成功！"),e.dialogDel=!1,e.getList(e.current,e.size)}))},handleUsing:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:1}]},a.dialogUsing=!0},toUsing:function(){var e=this;l["a"].createRaw(e.listForm).then((function(t){e.$message.success("启用成功！"),e.dialogUsing=!1,e.getList(e.current,e.size),e.listForm.service=[]}))},handleBan:function(e,t){var a=this;console.log(t),a.listForm={id:t.id,service:[{state:2}]},a.dialogBan=!0},toBan:function(){var e=this;l["a"].createRaw(e.listForm).then((function(t){e.$message.success("禁用成功！"),e.dialogBan=!1,e.getList(e.current,e.size),e.listForm.service=[]}))},refresh:function(){this.reload()}}},b=h,f=(a("bf89"),Object(d["a"])(b,p,g,!1,null,"9e14af96",null)),v=f.exports,_={components:{vOwner:m,vUser:v},data:function(){return{activeName:"role"}},methods:{changeActive:function(){this.activeName,this.activeName}}},y=_,k=Object(d["a"])(y,n,i,!1,null,null,null);t["default"]=k.exports},e5ad:function(e,t,a){},fdf0:function(e,t,a){}}]);
//# sourceMappingURL=chunk-c597028a.5fb18ac2.js.map