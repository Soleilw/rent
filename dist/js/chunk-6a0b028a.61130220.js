(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a0b028a"],{"7f3f":function(e,t,r){},8649:function(e,t,r){"use strict";r.r(t);var a=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[r("div",{staticClass:"handle-box"},[r("div",{staticClass:"btn"},[r("el-button",{attrs:{type:"primary"},on:{click:e.addBuy}},[e._v("添加购买服务")])],1)]),r("el-dialog",{attrs:{title:"添加购买服务",visible:e.dialogBuy},on:{"update:visible":function(t){e.dialogBuy=t}}},[r("div",{staticClass:"box"},[r("el-form",{attrs:{model:e.form,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"选择服务"}},[r("el-checkbox",{on:{change:e.handleCheckAllService},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("全选")]),r("div",{staticClass:"service"},e._l(e.serviceList,(function(t,a){return r("div",{key:a},[r("el-checkbox-group",{staticClass:"service-item",model:{value:e.form.service,callback:function(t){e.$set(e.form,"service",t)},expression:"form.service"}},[r("el-checkbox",{attrs:{label:t,"true-labe":t.title},on:{change:function(r){return e.oneChange(t.title)}}},[e._v(e._s(t.name))])],1)],1)})),0)],1),r("el-form-item",{attrs:{label:"商品名称"}},[r("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),r("el-form-item",{attrs:{label:"商品价格"}},[r("el-input",{model:{value:e.form.price,callback:function(t){e.$set(e.form,"price",t)},expression:"form.price"}})],1),r("el-form-item",{attrs:{label:"商品时长"}},[r("el-input",{model:{value:e.form.time,callback:function(t){e.$set(e.form,"time",t)},expression:"form.time"}})],1),r("el-form-item",{attrs:{label:"商品描述"}},[r("el-input",{model:{value:e.form.detail,callback:function(t){e.$set(e.form,"detail",t)},expression:"form.detail"}})],1),r("div",{staticClass:"submit"},[r("el-form-item",[e.isAdd?r("el-button",{attrs:{type:"primary"},on:{click:e.newBuy}},[e._v("提交")]):e._e()],1)],1)],1)],1)]),r("el-dialog",{attrs:{title:"订单列表",visible:e.showServiceOrder,width:"80%"},on:{"update:visible":function(t){e.showServiceOrder=t}}},[r("div",{staticClass:"box"},[r("div",{staticClass:"handle-box"},[r("div",{staticClass:"btn"},[r("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入房屋地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.keyword)}},model:{value:e.keyword,callback:function(t){e.keyword=t},expression:"keyword"}},[r("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.keyword)}},slot:"append"})],1)],1)]),r("div",[r("el-table",{attrs:{data:e.orderData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[r("el-table-column",{attrs:{prop:"no",label:"订单ID"}}),r("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),r("el-table-column",{attrs:{prop:"user_name",label:"用户名"}}),r("el-table-column",{attrs:{prop:"name",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),r("el-table-column",{attrs:{prop:"addresses_text",label:"地址"}}),r("el-table-column",{attrs:{prop:"status",label:"订单状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.status?r("span",[e._v("提交")]):2==t.row.status?r("span",[e._v("已付款")]):3==t.row.status?r("span",[e._v("未付款")]):e._e()]}}])}),r("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}})],1),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.orderCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.orderSize,layout:"sizes, prev, pager, next, jumper",total:e.orderTotal},on:{"current-change":e.orderCurrentChange,"update:currentPage":function(t){e.orderCurrent=t},"update:current-page":function(t){e.orderCurrent=t},"size-change":e.orderSizeChange}})],1)],1)])]),r("el-table",{attrs:{data:e.tableDate,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[r("el-table-column",{attrs:{prop:"id",label:"商品ID",width:"100px"}}),r("el-table-column",{attrs:{prop:"title",label:"商品名称"}}),r("el-table-column",{attrs:{prop:"price",label:"商品价格"}}),r("el-table-column",{attrs:{prop:"time",label:"商品时长(天)"}}),r("el-table-column",{attrs:{prop:"detail",label:"商品描述"}}),r("el-table-column",{attrs:{prop:"service[0].name",label:"服务权限"}}),r("el-table-column",{attrs:{prop:"created_at",label:"创建时间"}}),r("el-table-column",{attrs:{prop:"updated_at",label:"更新时间"}}),r("el-table-column",{attrs:{label:"操作",width:"300px"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleEdit(t.$index,t.row)}}},[e._v("查看服务")]),r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return e.handleOrder(t.$index,t.row)}}},[e._v("服务订单")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return e.delService(t.$index,t.row)}}},[e._v("删除")])]}}])})],1),r("el-dialog",{attrs:{visible:e.dialogDel,title:"删除年级",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[r("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该住户")]),r("span",[r("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),r("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},l=[],n=(r("4160"),r("b0c0"),r("159b"),r("365c")),o=(r("3022"),{name:"buy",data:function(){return{loading:!0,dialogBuy:!1,showServiceOrder:!1,checkAll:!1,dialogDel:!1,serviceIdList:[],serviceList:[{name:"进出服务",title:"InAndOut"}],form:{identifier:"",title:"",price:"",detail:"",service:[],time:""},financial:"订单列表",financialList:[{value:1,label:"订单列表"},{value:2,label:"财务统计"}],orderData:[],orderSize:10,orderTotal:0,orderCurrent:1,tableDate:[],current:1,total:0,size:10,product_id:"",id:"",keyword:"",isAdd:!0}},mounted:function(){this.getBuys()},methods:{getBuys:function(){var e=this;n["a"].buys(e.current,e.size).then((function(t){e.loading=!1,e.tableDate=t.data,e.total=t.total})).catch((function(t){e.loading=!1,console.log(t)}))},currentChange:function(e){var t=this;t.current=e,t.loading=!0,n["a"].buys(e,t.size).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,n["a"].buys(t.current,e).then((function(e){t.loading=!1,t.tableDate=e.data,t.total=e.total})).catch((function(e){t.loading=!1,console.log(e)}))},search:function(){var e=this;n["a"].server(e.current,e.size,e.product_id,e.keyword).then((function(t){e.orderData=t.data,e.orderTotal=t.total,e.$message.success("搜索成功！")}))},newBuy:function(){var e=this;console.log("newBuy",e.form),n["a"].buy(e.form).then((function(t){e.dialogBuy=!1,e.$message.success("提交成功"),e.getBuys(),e.current=1,e.form={},e.form.service=[]}))},addBuy:function(){var e=this;e.dialogBuy=!0,e.checkAll=!1,e.isAdd=!0,e.form={identifier:"",title:"",price:"",detail:"",service:[],time:""}},handleCheckAllService:function(e){var t=this;t.form.service=e?t.serviceList:[],t.form.identifier="InAndOut",console.log(t.form.identifier)},oneChange:function(e){var t=this;t.form.identifier=e,console.log(e),1===t.form.service.length?t.checkAll=!0:t.checkAll=!1},handleEdit:function(e,t){var r=this;r.dialogBuy=!0,r.isAdd=!1,r.form=t;var a=[];t.service.forEach((function(e){a.push({title:e.title,name:e.name})})),r.form.service=a,r.serviceList=a,1===t.service.length?r.checkAll=!0:r.checkAll=!1},handleOrder:function(e,t){var r=this;r.showServiceOrder=!0,r.product_id=t.id,r.keyword="",n["a"].server(r.current,r.size,r.product_id).then((function(e){r.orderData=e.data,r.orderTotal=e.total,r.orderCurrent=1,r.$message.success("获取数据成功")}))},orderCurrentChange:function(e){var t=this;t.orderCurrent=e,""==t.keyword?n["a"].server(e,t.orderSize,t.product_id).then((function(e){t.orderData=e.data,t.orderTotal=e.total})):n["a"].server(e,t.orderSize,t.product_id,t.keyword).then((function(e){t.orderData=e.data,t.orderTotal=e.total}))},orderSizeChange:function(e){var t=this;""==t.keyword?n["a"].server(t.orderCurrent,e,t.product_id).then((function(e){t.orderData=e.data,t.orderTotal=e.total})):n["a"].server(t.orderCurrent,e,t.product_id,t.keyword).then((function(e){t.orderData=e.data,t.orderTotal=e.total}))},delService:function(e,t){var r=this;r.id=t.id,r.dialogDel=!0},toDel:function(){var e=this;n["a"].delServer(e.id).then((function(t){e.$message.success("删除成功"),e.dialogDel=!1,e.getBuys()}))}}}),i=o,c=(r("9733"),r("2877")),s=Object(c["a"])(i,a,l,!1,null,"7b21bf16",null);t["default"]=s.exports},9733:function(e,t,r){"use strict";var a=r("7f3f"),l=r.n(a);l.a}}]);
//# sourceMappingURL=chunk-6a0b028a.61130220.js.map