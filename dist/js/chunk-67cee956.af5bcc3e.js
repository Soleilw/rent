(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-67cee956"],{"07c3":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[a("div",{staticClass:"handle-box"},[a("div",{staticClass:"btn"},[a("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1),e.isAdmin?a("div",{staticClass:"btn"},[a("span",[e._v("社区：")]),a("el-select",{attrs:{placeholder:"请选择社区"},on:{change:e.changeAreaType},model:{value:e.area,callback:function(t){e.area=t},expression:"area"}},e._l(e.areaList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.title,value:e.id}})})),1)],1):e._e(),a("div",{staticClass:"btn"},[a("span",[e._v("出租屋：")]),a("el-select",{attrs:{placeholder:"请选择/输入出租屋",filterable:""},on:{change:e.letType},model:{value:e.lets,callback:function(t){e.lets=t},expression:"lets"}},e._l(e.letList,(function(e){return a("el-option",{key:e.index,attrs:{label:e.address,value:e.id}})})),1)],1)]),a("div",{staticClass:"table_box"},[a("el-table",{attrs:{data:e.tableData,"empty-text":"暂无数据",border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[a("el-table-column",{attrs:{prop:"id",label:"ID"}}),""==e.lets?a("el-table-column",{attrs:{prop:"name",label:"房屋地址"}}):a("el-table-column",{attrs:{prop:"name",label:"单元编号"}}),a("el-table-column",{attrs:{prop:"count",label:"人口总数"}}),a("el-table-column",{attrs:{prop:"man",label:"男性人数"}}),a("el-table-column",{attrs:{prop:"woman",label:"女性人数"}}),""==e.lets?a("el-table-column",{attrs:{prop:"wait_state",label:"待审核人数"}}):e._e(),""==e.lets?a("el-table-column",{attrs:{prop:"already_state",label:"审核通过人数"}}):e._e(),""==e.lets?a("el-table-column",{attrs:{prop:"no_state",label:"审核未通过人数"}}):e._e(),""==e.lets?a("el-table-column",{attrs:{label:"操作",width:"250px"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(a){return e.openedPie(t.$index,t.row)}}},[e._v("查看男女比例")])]}}],null,!1,2976893758)}):e._e()],1)],1),""==e.area&&""==e.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1):e._e(),""!=e.area&&""==e.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.areaCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.areaSize,layout:"sizes, prev, pager, next, jumper",total:e.areaTotal},on:{"current-change":e.areaCurrentChange,"update:currentPage":function(t){e.areaCurrent=t},"update:current-page":function(t){e.areaCurrent=t},"size-change":e.areaSizeChange}})],1):e._e(),""!=e.area&&""!=e.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.letsCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.letsSize,layout:"sizes, prev, pager, next, jumper",total:e.letsTotal},on:{"current-change":e.letsCurrentchange,"update:currentPage":function(t){e.letsCurrent=t},"update:current-page":function(t){e.letsCurrent=t},"size-change":e.letsSizeChange}})],1):e._e(),"admin"!=e.username&&""!=e.lets?a("div",{staticClass:"block"},[a("el-pagination",{attrs:{"current-page":e.letsCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.letsSize,layout:"sizes, prev, pager, next, jumper",total:e.letsTotal},on:{"current-change":e.letsCurrentchange,"update:currentPage":function(t){e.letsCurrent=t},"update:current-page":function(t){e.letsCurrent=t},"size-change":e.letsSizeChange}})],1):e._e(),"admin"==e.username?a("div",{staticClass:"box"},[a("div",{attrs:{id:"bar-chart"}})]):e._e(),a("el-dialog",{attrs:{title:"男女比例图",visible:e.dialogLogs,center:"",width:"50%"},on:{"update:visible":function(t){e.dialogLogs=t}}},[a("div",{ref:"chart",attrs:{id:"pie-chart-user"}})])],1)},i=[],r=(a("4160"),a("b0c0"),a("159b"),a("365c"));a("3022");a("313e");var s={inject:["reload"],data:function(){return{loading:!0,tableData:[],current:1,size:10,total:0,areaCurrent:1,areaSize:10,areaTotal:0,letsCurrent:1,letsSize:10,letsTotal:0,username:localStorage.getItem("username"),isAdmin:!0,area:"",areaList:[],lets:"",letList:[],area_id:"",address_id:"",dialogLogs:!1,bar:{title:{text:"社区人数统计",left:"center"},tooltip:{},xAxis:{data:[]},yAxis:{},dataZoom:[{type:"inside"}],series:[]},pie:{title:{text:"租客男女比例",left:"center"},tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{orient:"vertical",left:"right",data:["男生人数","女生人数"]},series:[{name:"",type:"pie",radius:"55%",center:["50%","60%"],label:{normal:{formatter:"{d}%",position:"inside"}},data:[{value:0,name:"男生人数"},{value:0,name:"女生人数"}],emphasis:{itemStyle:{shadowBlur:10,shadowOffsetX:0,shadowColor:"rgba(0, 0, 0, 0.5)"}}}]},nameList:[],countList:[],existCount:[],num:null}},mounted:function(){this.getSstatistics(),this.getArea(),"admin"!==this.username?(this.isAdmin=!1,this.getLet()):this.getTotal()},methods:{refresh:function(){this.reload()},fucSstatistics:function(e,t){var a=this;r["a"].statistics(e,t).then((function(e){a.loading=!1,a.tableData=e.data,a.total=e.total})).catch((function(e){a.loading=!1}))},getSstatistics:function(){var e=this;e.lets="",e.area="","admin"==e.username&&(e.letList=[]),e.fucSstatistics(e.current,e.size)},currentChange:function(e){var t=this;t.current=e,t.loading=!0,t.fucSstatistics(e,t.size)},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,t.fucSstatistics(1,e),t.current=1},getArea:function(){var e=this;r["a"].areas(1,100,3).then((function(t){e.areaList=t.data}))},getLet:function(){var e=this;r["a"].addresses(1,100,e.area_id).then((function(t){e.letList=t.data}))},fucArea:function(e,t,a){var n=this;r["a"].statistics(e,t,a).then((function(e){n.loading=!1,n.tableData=e.data,n.areaTotal=e.total})).catch((function(e){n.loading=!1}))},changeAreaType:function(e){var t=this;t.area_id=e,t.lets="",t.current=1,t.areaCurrent=1,t.loading=!0,t.fucArea(t.areaCurrent,t.areaSize,t.area_id),t.getLet()},areaCurrentChange:function(e){var t=this;t.areaCurrent=e,t.loading=!0,t.fucArea(e,t.areaSize,t.area_id)},areaSizeChange:function(e){var t=this;t.areaSize=e,t.loading=!0,t.fucArea(1,e,t.area_id),t.areaCurrent=1},fucLet:function(e,t,a,n){var i=this;r["a"].statistics(e,t,a,n).then((function(e){i.loading=!1,i.tableData=e.data,i.letsTotal=e.total})).catch((function(e){i.loading=!1}))},letType:function(e){var t=this;console.log(e),t.address_id=e,t.loading=!0,t.letsCurrent=1,t.fucLet(t.letsCurrent,t.letsSize,t.area_id,t.address_id)},letsCurrentchange:function(e){var t=this;t.letsCurrent=e,t.loading=!0,t.fucLet(e,t.letsSize,t.area_id,t.address_id)},letsSizeChange:function(e){var t=this;t.letsSize=e,t.loading=!0,t.fucLet(1,e,t.area_id,t.address_id),t.letsCurrent=1},getTotal:function(){var e=this,t=document.getElementById("bar-chart"),n=a("313e").init(t);n.setOption(e.bar),e.nameList=[],e.countList=[],r["a"].statistics(1,1e4).then((function(t){t.data.forEach((function(t){e.nameList.push(t.name),e.countList.push(t.count)}));var a=6;n.on("click",(function(t){console.log(e.nameList[Math.max(t.dataIndex-a/2,0)]),n.dispatchAction({type:"dataZoom",startValue:e.nameList[Math.max(t.dataIndex-a/2,0)],endValue:e.nameList[Math.min(t.dataIndex+a/2,e.nameList.length-1)]})})),n.setOption(e.bar={xAxis:{data:e.nameList},dataZoom:[{type:"inside"}],series:[{name:"社区总人数",type:"bar",label:{show:!0,position:"inside"},data:e.countList}]})}))},openedPie:function(e,t){var a=this;a.dialogLogs=!0,a.num=e,a.getPie()},getPie:function(){var e=this;e.$nextTick((function(){var t=this.$refs.chart,n=a("313e").init(t);n.setOption(e.pie),""==e.area&&""==e.lets&&"admin"==e.username?r["a"].statistics(e.current,e.size).then((function(t){n.setOption(e.pie={title:{text:t.data[e.num].name,left:"center"},series:[{name:t.data[e.num].name,data:[{value:t.data[e.num].man,name:"男生人数"},{value:t.data[e.num].woman,name:"女生人数"}]}]})})):""!=e.area&&""==e.lets&&"admin"==e.username?r["a"].statistics(e.areaCurrent,e.areaSize,e.area_id).then((function(t){n.setOption(e.pie={title:{text:t.data[e.num].name,left:"center"},series:[{name:t.data[e.num].name,data:[{value:t.data[e.num].man,name:"男生人数"},{value:t.data[e.num].woman,name:"女生人数"}]}]})})):"admin"!=e.username&&r["a"].statistics(e.current,e.size).then((function(t){n.setOption(e.pie={title:{text:t.data[e.num].name,left:"center"},series:[{name:t.data[e.num].name,data:[{value:t.data[e.num].man,name:"男生人数"},{value:t.data[e.num].woman,name:"女生人数"}]}]})}))}))}}},l=s,o=(a("d2bd"),a("2877")),u=Object(o["a"])(l,n,i,!1,null,"40297302",null);t["default"]=u.exports},"14f7":function(e,t,a){},d2bd:function(e,t,a){"use strict";var n=a("14f7"),i=a.n(n);i.a}}]);
//# sourceMappingURL=chunk-67cee956.af5bcc3e.js.map