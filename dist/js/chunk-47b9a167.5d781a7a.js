(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-47b9a167"],{1276:function(e,t,i){"use strict";var a=i("d784"),s=i("44e7"),n=i("825a"),r=i("1d80"),o=i("4840"),l=i("8aa5"),d=i("50c4"),u=i("14c3"),c=i("9263"),g=i("d039"),p=[].push,m=Math.min,h=4294967295,b=!g((function(){return!RegExp(h,"y")}));a("split",2,(function(e,t,i){var a;return a="c"=="abbc".split(/(b)*/)[1]||4!="test".split(/(?:)/,-1).length||2!="ab".split(/(?:ab)*/).length||4!=".".split(/(.?)(.?)/).length||".".split(/()()/).length>1||"".split(/.?/).length?function(e,i){var a=String(r(this)),n=void 0===i?h:i>>>0;if(0===n)return[];if(void 0===e)return[a];if(!s(e))return t.call(a,e,n);var o,l,d,u=[],g=(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.unicode?"u":"")+(e.sticky?"y":""),m=0,b=new RegExp(e.source,g+"g");while(o=c.call(b,a)){if(l=b.lastIndex,l>m&&(u.push(a.slice(m,o.index)),o.length>1&&o.index<a.length&&p.apply(u,o.slice(1)),d=o[0].length,m=l,u.length>=n))break;b.lastIndex===o.index&&b.lastIndex++}return m===a.length?!d&&b.test("")||u.push(""):u.push(a.slice(m)),u.length>n?u.slice(0,n):u}:"0".split(void 0,0).length?function(e,i){return void 0===e&&0===i?[]:t.call(this,e,i)}:t,[function(t,i){var s=r(this),n=void 0==t?void 0:t[e];return void 0!==n?n.call(t,s,i):a.call(String(s),t,i)},function(e,s){var r=i(a,e,this,s,a!==t);if(r.done)return r.value;var c=n(e),g=String(this),p=o(c,RegExp),f=c.unicode,v=(c.ignoreCase?"i":"")+(c.multiline?"m":"")+(c.unicode?"u":"")+(b?"y":"g"),_=new p(b?c:"^(?:"+c.source+")",v),y=void 0===s?h:s>>>0;if(0===y)return[];if(0===g.length)return null===u(_,g)?[g]:[];var w=0,C=0,x=[];while(C<g.length){_.lastIndex=b?C:0;var k,z=u(_,b?g:g.slice(C));if(null===z||(k=m(d(_.lastIndex+(b?0:C)),g.length))===w)C=l(g,C,f);else{if(x.push(g.slice(w,C)),x.length===y)return x;for(var S=1;S<=z.length-1;S++)if(x.push(z[S]),x.length===y)return x;C=w=k}}return x.push(g.slice(w)),x}]}),!b)},7218:function(e,t,i){"use strict";i.r(t);var a=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],attrs:{"element-loading-text":"拼命加载中"}},[i("div",{staticClass:"handle-box"},[i("div",{staticClass:"btn"},[e.isShow?i("el-button",{attrs:{type:"primary"},on:{click:e.addHouses}},[e._v("添加房屋")]):e._e()],1),i("div",{staticClass:"btn"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"输入房屋地址"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.search(e.house_id)}},model:{value:e.house_id,callback:function(t){e.house_id=t},expression:"house_id"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.search(e.house_id)}},slot:"append"}),i("el-button",{attrs:{slot:"append",icon:"el-icon-refresh"},on:{click:e.refresh},slot:"append"})],1)],1)]),i("el-dialog",{attrs:{title:"添加房屋",visible:e.dialogHouses,width:"80%"},on:{"update:visible":function(t){e.dialogHouses=t},close:e.close}},[i("div",{staticClass:"box"},[i("el-form",{attrs:{model:e.listForm}},[i("div",{staticClass:"handle-box"},[i("el-alert",{attrs:{title:"添加地址: 选择所在社区 --\x3e 点击地址所在行 --\x3e 提交",type:"info","show-icon":"",closable:!1,effect:"dark",center:""}})],1),i("div",{staticClass:"handle-box"},[i("div",{staticClass:"btn"},[i("span",[e._v("选择社区: ")]),i("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择省份"},on:{change:e.proChange},model:{value:e.pro_id,callback:function(t){e.pro_id=t},expression:"pro_id"}},e._l(e.proList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),i("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择市级"},on:{change:e.cityChange},model:{value:e.city_id,callback:function(t){e.city_id=t},expression:"city_id"}},e._l(e.cityList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),i("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择区级"},on:{change:e.areasChange},model:{value:e.areas_id,callback:function(t){e.areas_id=t},expression:"areas_id"}},e._l(e.communityList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1),i("el-select",{staticStyle:{"margin-right":"10px"},attrs:{placeholder:"请选择社区"},on:{change:e.communityChange},model:{value:e.community_id,callback:function(t){e.community_id=t},expression:"community_id"}},e._l(e.areaList,(function(e){return i("el-option",{key:e.id,attrs:{label:e.title,value:e.id}})})),1)],1)]),i("el-table",{ref:"singleTable",attrs:{data:e.addressList,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620","highlight-current-row":""},on:{"current-change":e.handleCurrentChange}},[i("el-table-column",{attrs:{prop:"groups[0].address_id",label:"地址ID"}}),i("el-table-column",{attrs:{prop:"address",label:"房屋地址"}}),i("el-table-column",{attrs:{prop:"groups[0].group_name",label:"人脸组"}}),i("el-table-column",{attrs:{prop:"stations",label:"派出所"}})],1),i("div",{staticClass:"submit"},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.newHouses}},[e._v("提交")])],1)],1)],1)],1)]),i("el-table",{attrs:{data:e.tableData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"id",label:"ID"}}),i("el-table-column",{attrs:{prop:"address",label:"房屋地址"}}),i("el-table-column",{attrs:{prop:"room_count",label:"单元总数"}}),i("el-table-column",{attrs:{prop:"room_resident",label:"租客总数"}}),i("el-table-column",{attrs:{prop:"pay_resident",label:"缴费人数"}}),i("el-table-column",{attrs:{prop:"state",label:"是否收费"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-color":"#2a9f93"},on:{change:function(i){return e.notifyChange(t.row.state,t.$index,t.row)}},model:{value:t.row.state,callback:function(i){e.$set(t.row,"state",i)},expression:"scope.row.state"}})]}}])}),i("el-table-column",{attrs:{prop:"is_visitor_code",label:"是否开启访客码"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-switch",{attrs:{"active-color":"#2a9f93"},on:{change:function(i){return e.visitorCodeChange(t.row.is_visitor_code,t.$index,t.row)}},model:{value:t.row.is_visitor_code,callback:function(i){e.$set(t.row,"is_visitor_code",i)},expression:"scope.row.is_visitor_code"}})]}}])}),i("el-table-column",{attrs:{label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-dropdown",[i("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleBuild(t.$index,t.row)}}},[e._v("楼栋管理")])],1),i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleResident(t.$index,t.row)}}},[e._v("查看住户信息 ")])],1),i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleFace(t.$index,t.row)}}},[e._v("全库推送人脸")])],1),i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleRental(t.$index,t.row)}}},[e._v("修改出租屋")])],1),i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleLoseFace(t.$index,t.row)}}},[e._v("失效过期人脸 ")])],1)],1)],1)]}}])})],1),i("el-dialog",{attrs:{title:"查看所有住户信息",visible:e.dialogResident,width:"80%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogResident=t}}},[i("div",{staticClass:"box"},[i("div",{staticClass:"handle-box"},[i("div",{staticClass:"btn"},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:e.handleUser},model:{value:e.user,callback:function(t){e.user=t},expression:"user"}},e._l(e.userList,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1),i("div",{staticClass:"btn"},[i("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入姓名"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.searchRes(e.name)}},model:{value:e.name,callback:function(t){e.name=t},expression:"name"}},[i("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:function(t){return e.searchRes(e.name)}},slot:"append"})],1)],1)]),i("el-table",{attrs:{data:e.residentData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),i("el-table-column",{attrs:{prop:"name",label:"真实姓名"}}),i("el-table-column",{attrs:{prop:"type",label:"用户身份"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.type?i("span",[e._v("户主")]):2==t.row.type?i("span",[e._v("租客")]):3==t.row.type?i("span",[e._v("家庭成员")]):4==t.row.type?i("span",[e._v("物业")]):e._e()]}}])}),i("el-table-column",{attrs:{prop:"room.door_number",label:"门牌号"}}),i("el-table-column",{attrs:{prop:"card_number",label:"身份证号"}}),i("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),i("el-table-column",{attrs:{prop:"href",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.href?i("div",[i("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[i("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.href}}),i("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.href},slot:"reference"})])],1):i("div",[i("span",[e._v("--暂无图片--")])])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-dropdown",[i("el-button",{attrs:{type:"primary"}},[e._v(" 操作 "),i("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),i("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[i("el-dropdown-item",[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return e.handleLogs(t.$index,t.row)}}},[e._v("进出记录 ")])],1),i("el-dropdown-item",[e.isShow?i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return e.handleDel(t.$index,t.row)}}},[e._v("删除 ")]):e._e()],1)],1)],1)]}}])})],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.rensidentCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.residentSize,layout:"sizes, prev, pager, next, jumper",total:e.residentTotal},on:{"current-change":e.residentCurrentChange,"update:currentPage":function(t){e.rensidentCurrent=t},"update:current-page":function(t){e.rensidentCurrent=t},"size-change":e.residentSizeChange}})],1)],1)]),i("el-dialog",{attrs:{title:"访客记录",visible:e.dialogVisitor,width:"80%"},on:{"update:visible":function(t){e.dialogVisitor=t}}},[i("div",{staticClass:"box"},[i("el-table",{attrs:{data:e.visitorList,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"name",label:"真实姓名"}}),i("el-table-column",{attrs:{prop:"interviewee_name",label:"拜访人"}}),i("el-table-column",{attrs:{prop:"phone",label:"手机号"}}),i("el-table-column",{attrs:{prop:"visitor_date",label:"到访时间"}}),i("el-table-column",{attrs:{prop:"href",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.href?i("div",[i("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[i("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.href}}),i("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.href},slot:"reference"})])],1):i("div",[i("span",[e._v("--暂无图片--")])])]}}])}),i("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.handleLogs(t.$index,t.row)}}},[e._v("进出记录")])]}}])})],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.visitorCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.visitorSize,layout:"sizes, prev, pager, next, jumper",total:e.visitorTotal},on:{"current-change":e.visitorCurrentChange,"update:currentPage":function(t){e.visitorCurrent=t},"update:current-page":function(t){e.visitorCurrent=t},"size-change":e.visitorSizeChange}})],1)]),i("el-dialog",{attrs:{title:"楼栋管理",visible:e.dialogBuild,width:"60%"},on:{"update:visible":function(t){e.dialogBuild=t}}},[i("div",{staticClass:"box"},[i("div",{staticClass:"handle-box"},[i("div",{staticClass:"btn"},[i("el-button",{attrs:{type:"primary"},on:{click:e.handleAddBuild}},[e._v("添加房屋编号")])],1)]),i("el-table",{attrs:{data:e.buildingList,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"door_number",label:"房屋编号"}}),i("el-table-column",{attrs:{prop:"count",label:"人数"}}),i("el-table-column",{attrs:{label:"操作",width:"500px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.handleBuildEdit(t.$index,t.row)}}},[e._v("编辑uuid")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.handleVistor(t.$index,t.row)}}},[e._v("访客")]),i("el-button",{attrs:{type:"primary",size:"mini"},on:{click:function(i){return e.handleMember(t.$index,t.row)}}},[e._v("房间成员")]),i("el-button",{attrs:{type:"danger",size:"mini"},on:{click:function(i){return e.HandledelBuilding(t.$index,t.row)}}},[e._v("删除")])]}}])})],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.buildingCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.buildingSize,layout:"sizes, prev, pager, next, jumper",total:e.buildingTotal},on:{"current-change":e.buildingCurrentChange,"update:currentPage":function(t){e.buildingCurrent=t},"update:current-page":function(t){e.buildingCurrent=t},"size-change":e.buildingSizeChange}})],1)]),i("el-dialog",{attrs:{visible:e.dialogDelBuild,title:"删除房屋编号",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDelBuild=t}}},[i("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该房屋编号")]),i("span",[i("el-button",{attrs:{type:"primary"},on:{click:e.toDelBuild}},[e._v("删除")]),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDelBuild=!1}}},[e._v("取消")])],1)]),i("el-dialog",{attrs:{title:"添加房屋编号",visible:e.dialogAddBuild,width:"50%"},on:{"update:visible":function(t){e.dialogAddBuild=t}}},[i("div",{staticClass:"box"},[i("el-form",{attrs:{model:e.buildForm,"label-width":"150px"}},[e._l(e.buildForm.rooms,(function(t,a){return i("div",{key:a},[i("div",[i("el-form-item",{attrs:{label:"房屋编号(必填)"}},[i("el-input",{attrs:{placeholder:"请输入房屋编号"},model:{value:e.buildForm.rooms[a].room,callback:function(t){e.$set(e.buildForm.rooms[a],"room",t)},expression:"buildForm.rooms[index].room"}})],1),i("el-form-item",{attrs:{label:"uuid"}},[i("el-input",{attrs:{placeholder:"请输入uuid"},model:{value:e.buildForm.rooms[a].uuid,callback:function(t){e.$set(e.buildForm.rooms[a],"uuid",t)},expression:"buildForm.rooms[index].uuid"}})],1)],1)])})),e.isAdd?i("el-form-item",{attrs:{label:"操作"}},[i("el-button",{attrs:{type:"primary"},on:{click:e.addRooms}},[e._v("添加房屋编号")]),i("el-button",{attrs:{type:"primary"},on:{click:e.delRooms}},[e._v("删除房屋编号")])],1):e._e(),i("div",{staticClass:"submit"},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.newRooms}},[e._v("提交")])],1)],1)],2)],1)]),i("el-dialog",{attrs:{title:"成员信息",visible:e.dialogMember,width:"80%"},on:{"update:visible":function(t){e.dialogMember=t}}},[i("div",{staticClass:"box"},[i("el-table",{attrs:{data:e.memberData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"user_id",label:"用户ID"}}),i("el-table-column",{attrs:{prop:"typeString",label:"用户身份"}}),i("el-table-column",{attrs:{prop:"snapshot.name",label:"用户姓名"}}),i("el-table-column",{attrs:{prop:"snapshot.card_number",label:"用户证件号"}}),i("el-table-column",{attrs:{prop:"snapshot.href",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.snapshot.href?i("div",[i("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[i("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.snapshot.href}}),i("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.snapshot.href},slot:"reference"})])],1):i("div",[i("span",[e._v("--暂无图片--")])])]}}])})],1)],1)]),i("el-dialog",{attrs:{title:"进出记录",visible:e.dialogLogs,width:"80%"},on:{"update:visible":function(t){e.dialogLogs=t}}},[i("div",{staticClass:"box"},[i("el-table",{attrs:{data:e.logsData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),i("el-table-column",{attrs:{prop:"number",label:"证件号"}}),i("el-table-column",{attrs:{prop:"time",label:"时间"}}),i("el-table-column",{attrs:{prop:"direction",label:"进出状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.direction?i("span",[e._v("进入")]):2==t.row.direction?i("span",[e._v("外出")]):e._e()]}}])}),i("el-table-column",{attrs:{prop:"image",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?i("div",[i("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[i("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.image}}),i("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.image},slot:"reference"})])],1):i("div",[i("span",[e._v("--暂无图片--")])])]}}])})],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.logsCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.logsSize,layout:"sizes, prev, pager, next, jumper",total:e.logsTotal},on:{"current-change":e.logsCurrentChange,"update:currentPage":function(t){e.logsCurrent=t},"update:current-page":function(t){e.logsCurrent=t},"size-change":e.logsSizeChange}})],1)]),i("el-dialog",{attrs:{title:"进出记录",visible:e.dialogVisitorLogs,width:"80%"},on:{"update:visible":function(t){e.dialogVisitorLogs=t}}},[i("div",{staticClass:"box"},[i("el-table",{attrs:{data:e.visitorLogsData,border:"","header-cell-style":{background:"#f0f0f0"},"max-height":"620"}},[i("el-table-column",{attrs:{prop:"id",label:"用户ID"}}),i("el-table-column",{attrs:{prop:"number",label:"证件号"}}),i("el-table-column",{attrs:{prop:"time",label:"时间"}}),i("el-table-column",{attrs:{prop:"direction",label:"进出状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.direction?i("span",[e._v("进入")]):2==t.row.direction?i("span",[e._v("外出")]):e._e()]}}])}),i("el-table-column",{attrs:{prop:"image",label:"人脸照片"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.image?i("div",[i("el-popover",{attrs:{placement:"top-start",title:"",trigger:"click"}},[i("img",{staticStyle:{"max-width":"800px","max-height":"800px"},attrs:{src:t.row.image}}),i("img",{staticStyle:{"max-width":"180px","max-height":"80px"},attrs:{slot:"reference",src:t.row.image},slot:"reference"})])],1):i("div",[i("span",[e._v("--暂无图片--")])])]}}])})],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.logsCurrent,"page-sizes":[10,20,30,40,50],"page-size":e.logsSize,layout:"sizes, prev, pager, next, jumper",total:e.logsTotal},on:{"current-change":e.logsCurrentChange,"update:currentPage":function(t){e.logsCurrent=t},"update:current-page":function(t){e.logsCurrent=t},"size-change":e.logsSizeChange}})],1)]),i("el-dialog",{attrs:{visible:e.dialogDel,title:"删除住户",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogDel=t}}},[i("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否删除该住户")]),i("span",[i("el-button",{attrs:{type:"primary"},on:{click:e.toDel}},[e._v("删除")]),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogDel=!1}}},[e._v("取消")])],1)]),i("el-dialog",{attrs:{visible:e.dialogFace,title:"全库推送人脸",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogFace=t}}},[i("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否全库推送人脸")]),i("span",[i("el-button",{attrs:{type:"primary"},on:{click:e.pushFace}},[e._v("推送")]),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogFace=!1}}},[e._v("取消")])],1)]),i("el-dialog",{attrs:{visible:e.dialogLose,title:"失效过期人脸",width:"20%",align:"center","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogLose=t}}},[i("div",{staticStyle:{"font-size":"20px","margin-bottom":"30px"}},[e._v("是否失效该地址过期人脸")]),i("span",[i("el-button",{attrs:{type:"primary"},on:{click:e.toLose}},[e._v("确定")]),i("el-button",{attrs:{type:"danger"},on:{click:function(t){e.dialogLose=!1}}},[e._v("取消")])],1)]),i("el-dialog",{attrs:{visible:e.dialogRental,title:"修改出租屋",width:"50%","close-on-click-modal":!1},on:{"update:visible":function(t){e.dialogRental=t}}},[i("el-form",{attrs:{"label-width":"80px",model:e.listForm}},[i("el-form-item",{attrs:{label:"社区ID"}},[i("el-input",{attrs:{disabled:e.isDisabled},model:{value:e.listForm.area_id,callback:function(t){e.$set(e.listForm,"area_id",t)},expression:"listForm.area_id"}})],1),i("el-form-item",{attrs:{label:"地址ID"}},[i("el-input",{attrs:{disabled:e.isDisabled},model:{value:e.listForm.address_id,callback:function(t){e.$set(e.listForm,"address_id",t)},expression:"listForm.address_id"}})],1),i("el-form-item",{attrs:{label:"地址"}},[i("el-input",{model:{value:e.listForm.address,callback:function(t){e.$set(e.listForm,"address",t)},expression:"listForm.address"}})],1),i("el-form-item",{attrs:{label:"派出所"}},[i("el-input",{attrs:{disabled:e.isDisabled},model:{value:e.listForm.police,callback:function(t){e.$set(e.listForm,"police",t)},expression:"listForm.police"}})],1),i("el-form-item",{attrs:{label:"人脸组"}},[i("el-input",{attrs:{disabled:e.isDisabled},model:{value:e.listForm.group,callback:function(t){e.$set(e.listForm,"group",t)},expression:"listForm.group"}})],1),i("div",{staticClass:"submit"},[i("el-form-item",[i("el-button",{attrs:{type:"primary"},on:{click:e.verifyID}},[e._v("提交")])],1)],1)],1)],1),i("div",{staticClass:"block"},[i("el-pagination",{attrs:{"current-page":e.current,"page-sizes":[10,20,30,40,50],"page-size":e.size,layout:"sizes, prev, pager, next, jumper",total:e.total},on:{"current-change":e.currentChange,"update:currentPage":function(t){e.current=t},"update:current-page":function(t){e.current=t},"size-change":e.sizeChange}})],1)],1)},s=[],n=(i("4160"),i("caad"),i("b0c0"),i("ac1f"),i("2532"),i("1276"),i("159b"),i("365c")),r=(i("bc3a"),i("3022"),{inject:["reload"],data:function(){return{loading:!0,dialogHouses:!1,dialogFace:!1,form:{name:"",sex:"",postion:""},tableData:[],current:1,size:10,total:0,dialogResident:!1,residentData:[],rensidentCurrent:1,residentSize:10,residentTotal:0,dialogBuild:!1,dialogVisitor:!1,dialogRental:!1,buildForm:{address_id:"",rooms:[{room:"",uuid:""}]},id:"",house_id:"",face_id:"",user:"全部",userList:[{value:0,label:"全部"},{value:1,label:"户主"},{value:2,label:"租客"},{value:3,label:"物业"},{value:4,label:"家庭成员"}],dialogLogs:!1,logsData:[],logsCurrent:1,logsSize:10,logsTotal:0,dialogDel:!1,dialogAddBuild:!1,dialogDelBuild:!1,buildingList:[],address_id:"",buildingCurrent:1,buildingSize:10,buildingTotal:0,building_id:"",isShow:!1,dialogVisitorLogs:!1,visitorList:[],visitorCurrent:1,visitorSize:10,visitorTotal:0,visitorLogsData:[],interviewee_name:"",room_id:"",familyType:"",card_number:"",permission:localStorage.getItem("permissions"),listForm:{area_id:"",address:"",address_id:"",group:"",police:"",id:""},addressList:"",proList:[],pro_id:"",cityList:[],city_id:"",communityList:[],community_id:"",areaList:[],areas_id:"",isAdd:!1,state:!1,isDisabled:!1,is_visitor_code:!1,dialogLose:!1,dialogMember:!1,memberData:[],name:"",userType:""}},mounted:function(){this.getnewHouses(this.current,this.size),this.getAddress(),this.getPro();var e=this.permission.split(",");e.includes("housesAdd")&&(this.isShow=!0)},methods:{getnewHouses:function(e,t){var i=this;n["a"].addresses(e,t).then((function(e){i.loading=!1,i.tableData=e.data,i.total=e.total,e.data.forEach((function(e){1==e.state?e.state=!0:e.state=!1,1==e.is_visitor_code?e.is_visitor_code=!0:e.is_visitor_code=!1}))})).catch((function(e){i.loading=!1}))},currentChange:function(e){var t=this;t.current=e,t.loading=!0,""==t.house_id?t.getnewHouses(e,t.size):t.funSearch(e,t.size)},sizeChange:function(e){var t=this;t.size=e,t.loading=!0,""==t.house_id?t.getnewHouses(1,e):t.funSearch(1,e),t.current=1},funSearch:function(e,t){var i=this;n["a"].addresses(e,t,0,i.house_id).then((function(e){i.loading=!1,i.tableData=e.data,i.total=e.total,e.data.forEach((function(e){1==e.state?e.state=!0:e.state=!1,1==e.is_visitor_code?e.is_visitor_code=!0:e.is_visitor_code=!1})),i.$message.success("搜索成功！")}))},search:function(){var e=this;e.current=1,e.funSearch(e.current,e.size)},searchRes:function(){var e=this;e.user="全部",e.rensidentCurrent=1,n["a"].addResSearch(e.rensidentCurrent,e.residentSize,e.address_id,e.name).then((function(t){e.$message.success("搜索成功！"),e.residentData=t.data,e.residentTotal=t.total}))},refresh:function(){this.reload()},notifyChange:function(e,t,i){var a=this,s={};1==e?(s={id:i.id,state:1},n["a"].addressState(s).then((function(e){a.$message.success("提交成功"),a.getnewHouses(a.current,a.size)}))):(s={id:i.id,state:2},n["a"].addressState(s).then((function(e){a.$message.success("提交成功"),a.getnewHouses(a.current,a.size)})))},visitorCodeChange:function(e,t,i){var a=this,s={};console.log(e),1==e?(s={id:i.id,is_visitor_code:1},n["a"].visitorCode(s).then((function(e){a.$message.success("提交成功"),a.getnewHouses(a.current,a.size)}))):(s={id:i.id,is_visitor_code:2},n["a"].visitorCode(s).then((function(e){a.$message.success("提交成功"),a.getnewHouses(a.current,a.size)})))},addHouses:function(){var e=this;e.dialogHouses=!0},close:function(){var e=this;e.pro_id="",e.city_id="",e.community_id="",e.areas_id="",e.cityList=[],e.communityList=[],e.areaList=[]},getAddress:function(){var e=this;n["a"].gainAddress(1,100).then((function(t){e.addressList=t.data}))},getPro:function(){var e=this;n["a"].areas(1,4e3,0).then((function(t){e.proList=t.data}))},getCity:function(e){var t=this;n["a"].areas(1,4e3,e).then((function(e){t.cityList=e.data}))},getCommunity:function(e){var t=this;n["a"].areas(1,100,e).then((function(e){t.communityList=e.data}))},proChange:function(e){var t=this;t.getCity(e)},getAreas:function(e){var t=this;n["a"].areas(1,4e3,e).then((function(e){t.areaList=e.data}))},cityChange:function(e){var t=this;t.getCommunity(e)},areasChange:function(e){var t=this;t.getAreas(e)},communityChange:function(e){var t=this;t.listForm.area_id=e},handleCurrentChange:function(e){var t=this;t.listForm.area_id?e.address&&e.area_id&&0!=e.groups.length&&e.stations?(t.$message.success("选择成功! "),t.listForm.address=e.address,t.listForm.address_id=e.groups[0].address_id,t.listForm.group=e.groups[0].group_name,t.listForm.police=e.stations,t.isAdd=!0):(t.$message.warning("该地址存在空数据, 无法添加"),t.isAdd=!1):t.$message.warning("请先选择社区")},newHouses:function(){var e=this;e.isAdd?n["a"].createAddress(e.listForm).then((function(t){e.$message.success("添加成功! "),e.dialogHouses=!1,e.reload()})):e.$message.warning("该地址存在空数据, 无法添加")},handleRental:function(e,t){var i=this;i.dialogRental=!0,console.log(t),i.listForm={area_id:t.area_id,address:t.address,address_id:t.address_id,group:t.group,police:t.police,id:t.id},i.isDisabled=!0},verifyID:function(){var e=this;n["a"].createAddress(e.listForm).then((function(t){e.$message.success("修改成功! "),e.dialogRental=!1,e.getnewHouses(e.current,e.size)}))},handleBuild:function(e,t){var i=this;i.dialogBuild=!0,i.buildForm.address_id=t.id,i.address_id=t.id,i.buildingCurrent=1,i.getBuilding(i.buildingCurrent,i.buildingSize)},getBuilding:function(e,t){var i=this;n["a"].gainRooms(e,t,i.address_id).then((function(e){i.$message.success("获取数据成功"),i.buildingList=e.data,i.buildingTotal=e.total}))},buildingCurrentChange:function(e){var t=this;t.buildingCurrent=e,t.getBuilding(e,t.buildingSize)},buildingSizeChange:function(e){var t=this;t.buildingSize=e,t.getBuilding(1,e),t.buildingCurrent=1},funVisitor:function(e,t){var i=this;n["a"].visitors(e,t,i.address_id,i.room_id).then((function(e){i.$message.success("获取数据成功"),i.visitorList=e.data,i.visitorTotal=e.total}))},handleVistor:function(e,t){var i=this;i.dialogVisitor=!0,i.address_id=t.address_id,i.room_id=t.id,i.visitorCurrent=1,i.funVisitor(i.visitorCurrent,i.visitorSize)},visitorCurrentChange:function(e){var t=this;t.visitorCurrent=e,t.funVisitor(e,t.visitorSize)},visitorSizeChange:function(e){var t=this;t.visitorSize=e,t.funVisitor(1,e),t.visitorCurrent=1},handleMember:function(e,t){var i=this;n["a"].roomMenber(i.address_id,t.id).then((function(e){i.dialogMember=!0,i.memberData=e}))},handleAddBuild:function(e,t){var i=this;i.isAdd=!0,i.dialogAddBuild=!0,i.buildForm={address_id:i.address_id,rooms:[{room:"",uuid:""}]}},addRooms:function(){var e=this;e.buildForm.rooms.push({room:"",uuid:""})},delRooms:function(){var e=this;e.buildForm.rooms.pop("")},newRooms:function(){var e=this;console.log(e.buildForm.rooms),n["a"].rooms(e.buildForm).then((function(t){console.log("添加成功"),e.dialogAddBuild=!1,e.buildForm.rooms=[],e.rooms="",e.getBuilding(e.buildingCurrent,e.buildingSize)}))},handleBuildEdit:function(e,t){var i=this;console.log(t),i.isAdd=!1,i.dialogAddBuild=!0,i.buildForm.address_id=i.address_id,i.buildForm.rooms=[{room:t.door_number,uuid:t.uuid}]},fucAllUser:function(e,t){var i=this;n["a"].addressResidents(e,t,i.address_id).then((function(e){i.$message.success("获取数据成功"),i.residentData=e.data,i.residentTotal=e.total}))},fucOwner:function(e,t,i){var a=this;n["a"].addressResidents(e,t,a.address_id,i).then((function(e){a.$message.success("获取数据成功"),a.residentData=e.data,a.residentTotal=e.total}))},handleResident:function(e,t){var i=this;i.dialogResident=!0,i.address_id=t.id,i.user="全部",i.rensidentCurrent=1,i.name="",i.fucAllUser(i.rensidentCurrent,i.residentSize)},handleUser:function(e){var t=this;switch(t.name="",t.rensidentCurrent=1,t.residentSize=10,t.userType=e,e){case 0:t.$nextTick((function(){t.user="全部",t.fucAllUser(t.rensidentCurrent,t.residentSize)}));break;case 1:t.$nextTick((function(){t.user="户主",t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType)}));break;case 2:t.$nextTick((function(){t.user="租客",t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType)}));break;case 3:t.$nextTick((function(){t.user="物业",t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType)}));break;case 4:t.$nextTick((function(){t.user="家庭成员",t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType)}));break}},residentCurrentChange:function(e){var t=this;t.rensidentCurrent=e,t.name?n["a"].addResSearch(e,t.residentSize,t.address_id,t.name).then((function(e){t.residentData=e.data,t.residentTotal=e.total})):"全部"!=t.user?t.fucOwner(e,t.residentSize,t.userType):t.fucAllUser(e,t.residentSize)},residentSizeChange:function(e){var t=this;t.residentSize=e,t.rensidentCurrent=1,t.name?n["a"].addResSearch(1,e,t.address_id,t.name).then((function(e){t.residentData=e.data,t.residentTotal=e.total})):"全部"!=t.user?t.fucOwner(1,e,t.userType):t.fucAllUser(1,e)},handleLogs:function(e,t){var i=this;i.dialogLogs=!0,i.face_id=t.face_id,i.logsCurrent=1,i.getFaceLogs(i.logsCurrent,i.logsSize)},getFaceLogs:function(e,t){var i=this;n["a"].faceLogs(e,t,i.face_id).then((function(e){i.logsData=e.data,i.logsTotal=e.total}))},logsCurrentChange:function(e){var t=this;t.logsCurrent=e,t.getFaceLogs(e,t.logsSize)},logsSizeChange:function(e){var t=this;t.logsSize=e,t.getFaceLogs(1,e),t.logsCurrent=1},handleFace:function(e,t){var i=this;i.dialogFace=!0,i.address_id=t.id},pushFace:function(){var e=this,t=this.$loading({lock:!0,text:"推送中...",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"});n["a"].pushAddressFace(e.address_id).then((function(i){t.close(),e.$message.success("推送成功"),e.dialogFace=!1})).catch((function(e){console.log(e)}))},handleDel:function(e,t){var i=this;i.id=t.id,i.familyType=t.type,i.card_number=t.card_number,i.dialogDel=!0},fucDel:function(e){var t=this;n["a"].delHousehold(t.id,e).then((function(e){switch(t.user){case"全部":t.$message.success("删除成功"),t.dialogDel=!1,t.fucAllUser(t.rensidentCurrent,t.residentSize);break;case"户主":t.$message.success("删除成功"),t.dialogDel=!1,t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType);break;case"租客":t.$message.success("删除成功"),t.dialogDel=!1,t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType);break;case"物业":t.$message.success("删除成功"),t.dialogDel=!1,t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType);break;case"家庭成员":t.$message.success("删除成功"),t.dialogDel=!1,t.fucOwner(t.rensidentCurrent,t.residentSize,t.userType);break}}))},toDel:function(){var e=this;3==e.familyType?e.fucDel(e.card_number):e.fucDel(1)},HandledelBuilding:function(e,t){var i=this;i.dialogDelBuild=!0,i.building_id=t.id},toDelBuild:function(){var e=this;n["a"].delBuilding(e.building_id).then((function(t){e.dialogDelBuild=!1,e.$message.success("删除成功"),e.getBuilding(e.buildingCurrent,e.buildingSize)}))},handleLoseFace:function(e,t){var i=this;i.address_id=t.id,t.state?i.dialogLose=!0:i.$message.warning("无法操作")},toLose:function(){var e=this;n["a"].passLose(e.address_id).then((function(t){e.$message.success("成功"),e.dialogLose=!1,e.getnewHouses(e.current,e.size)}))}}}),o=r,l=i("2877"),d=Object(l["a"])(o,a,s,!1,null,"6648c4a8",null);t["default"]=d.exports}}]);
//# sourceMappingURL=chunk-47b9a167.5d781a7a.js.map